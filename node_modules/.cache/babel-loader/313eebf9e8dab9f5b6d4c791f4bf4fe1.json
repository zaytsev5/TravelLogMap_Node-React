{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/mapbox/src/App.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport ReactMapGL, { Marker, Popup, Source, Layer } from 'react-map-gl';\nimport ImageView from './components/ImageView';\nimport AddBox from './components/AddBox';\nimport User from './components/User';\nimport Processing from './components/Processing';\nimport Direction from './components/Direction';\n\nconst Mapbox = () => {\n  const [exp, setExp] = useState();\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [isShown, setShow] = useState(0);\n  const [isAdd, setAdd] = useState(false);\n  const [point, setPoint] = useState(false);\n  const [pos, setPos] = useState({});\n  const [user, setUser] = useState(false);\n  const [load, setLoad] = useState(false);\n  const [logged, setLogged] = useState({});\n  const [hint, setHint] = useState(false); // const [exp, setExp] = useState(60000 * 5)\n  // const [addEntryLocation, setAddEntryLocation] = useState(null);\n\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 10.7781128,\n    longitude: 106.65325,\n    zoom: 12\n  });\n\n  const getUser = () => {\n    console.log(\"in getUser()\");\n    fetch(\"http://localhost:3000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    }).then(response => {\n      console.log(\"in then1\");\n      getEntries();\n      if (response.status === 200) return response.json();\n      throw new Error(\"failed to authenticate user\");\n    }).then(responseJson => {\n      console.log(\"in then2\");\n      console.log(responseJson.expired);\n      setLogged(responseJson.user);\n      setUser(true);\n      console.log(\"coi thuw\");\n      setTimeout(() => window.location = 'http://localhost:9000', responseJson.expired - new Date().getTime());\n    }).catch(error => {\n      setLogged(false);\n    });\n  };\n\n  const getEntries = async () => {\n    const response = await fetch('http://localhost:3000/api/logs');\n    const result = await response.json(); // setLogEntries(result)\n\n    console.log(result);\n    setLogEntries(result);\n    setLoad(true); //setUser(result)\n  };\n\n  const getUserPosition = async () => {\n    var getPosition = function (options) {\n      return new Promise(function (resolve, reject) {\n        navigator.geolocation.getCurrentPosition(resolve, reject, options);\n      });\n    };\n\n    const position = await getPosition();\n    const logEntries = [{\n      id: 1,\n      latitude: position.coords.latitude,\n      longitude: position.coords.longitude,\n      title: 'Bach Khoa University',\n      comments: 'This is the best university of Vietnam',\n      image: ' http://localhost:5000/img2.png'\n    }];\n    setLogEntries(logEntries);\n    console.log(logEntries);\n  };\n\n  useEffect(() => {\n    if (window.location.hash === \"#_=_\") {\n      window.history.replaceState ? window.history.replaceState(null, null, window.location.href.split(\"#\")[0]) : window.location.hash = \"\";\n    }\n\n    getUser(); // getEntries()\n\n    console.log(isShown);\n    console.log(exp);\n  }, []);\n\n  const onClick = e => {\n    const newVewport = { ...viewport,\n      latitude: e.lngLat[1],\n      longitude: e.lngLat[0]\n    };\n    setViewport(newVewport);\n  };\n\n  const onDblClick = e => {\n    //for(let i in e.lngLat) console.log(i);\n    console.log('A click event has occurred at ' + e.lngLat[0]);\n    setPos({\n      lng: e.lngLat[0],\n      lat: e.lngLat[1]\n    });\n    console.log(isAdd);\n    if (isAdd) setPoint(true);\n  };\n\n  const PlusIcon = ({\n    handleClick,\n    value\n  }) => {\n    const divStyle = {\n      position: 'absolute',\n      margin: '15px 15px',\n      zIndex: '500'\n    };\n    const divStyle1 = {\n      position: 'absolute',\n      margin: '10px 15px',\n      zIndex: '500',\n      animation: 'App-logo-spin 0s',\n      animationFillMode: 'forwards'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: value ? divStyle1 : divStyle,\n      onClick: () => handleClick(!value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      className: \"marker white\",\n      style: {\n        height: `${3 * viewport.zoom}px`,\n        width: `${3 * viewport.zoom}px`\n      },\n      version: \"1.1\",\n      id: \"Layer_1\",\n      x: \"0px\",\n      y: \"0px\",\n      viewBox: \"0 0 512 512\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      style: {\n        fill: 'white'\n      },\n      d: \"m272 184c-4.417969 0-8-3.582031-8-8v-176h-80v176c0 4.417969-3.582031 8-8 8h-176v80h176c4.417969 0 8 3.582031 8 8v176h80v-176c0-4.417969 3.582031-8 8-8h176v-80zm0 0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 23\n      }\n    })))));\n  };\n\n  const Point = ({\n    pos\n  }) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        padding: '2px 7px',\n        height: '15px',\n        lineHeight: '15px',\n        borderRadius: '3px',\n        backgroundColor: 'white',\n        color: 'black',\n        top: '2%',\n        left: '5%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 7\n      }\n    }, pos.lng.toFixed(4), \" - \", pos.lat.toFixed(4));\n  };\n\n  return /*#__PURE__*/React.createElement(ReactMapGL, Object.assign({\n    mapStyle: \"mapbox://styles/thecjreynolds/ck117fnjy0ff61cnsclwimyay\",\n    mapboxApiAccessToken: 'pk.eyJ1IjoiemF5dHNldjUiLCJhIjoiY2tjaWk4cnc2MGtiMDJxazJwMGllOThlNyJ9.HciILC1tn3zdsXCuvzdRog',\n    onViewportChange: setViewport,\n    doubleClickZoom: false // onClick={onClick}\n    ,\n    scrollZoom: isShown ? false : true,\n    onDblClick: e => onDblClick(e)\n  }, viewport, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PlusIcon, {\n    handleClick: val => setAdd(val),\n    value: isAdd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }), isAdd && /*#__PURE__*/React.createElement(AddBox, {\n    reload: () => getEntries(),\n    logged: user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 20\n    }\n  })), /*#__PURE__*/React.createElement(React.Fragment, null, point && /*#__PURE__*/React.createElement(Point, {\n    pos: pos,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 20\n    }\n  })), !load && /*#__PURE__*/React.createElement(Processing, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 18\n    }\n  }), logEntries.map(entry => /*#__PURE__*/React.createElement(React.Fragment, {\n    key: entry.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Marker, {\n    latitude: entry.latitude,\n    longitude: entry.longitude,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    // onClick = {() =>{\n    //   console.log(\"You have clicked...\");\n    // }}\n    onClick: () => setShowPopup(entry.id),\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"marker white\",\n    style: {\n      height: `${3 * viewport.zoom}px`,\n      width: `${3 * viewport.zoom}px`,\n      cursor: 'pointer'\n    },\n    version: \"1.1\",\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: 'white'\n    },\n    d: \"M184.08,0c-74.992,0-136,61.008-136,136c0,24.688,11.072,51.24,11.536,52.36c3.576,8.488,10.632,21.672,15.72,29.4 l93.248,141.288c3.816,5.792,9.464,9.112,15.496,9.112s11.68-3.32,15.496-9.104l93.256-141.296 c5.096-7.728,12.144-20.912,15.72-29.4c0.464-1.112,11.528-27.664,11.528-52.36C320.08,61.008,259.072,0,184.08,0z M293.8,182.152c-3.192,7.608-9.76,19.872-14.328,26.8l-93.256,141.296c-1.84,2.792-2.424,2.792-4.264,0L88.696,208.952 c-4.568-6.928-11.136-19.2-14.328-26.808C74.232,181.816,64.08,157.376,64.08,136c0-66.168,53.832-120,120-120 c66.168,0,120,53.832,120,120C304.08,157.408,293.904,181.912,293.8,182.152z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: 'white'\n    },\n    d: \"M184.08,64.008c-39.704,0-72,32.304-72,72c0,39.696,32.296,72,72,72c39.704,0,72-32.304,72-72 C256.08,96.312,223.784,64.008,184.08,64.008z M184.08,192.008c-30.872,0-56-25.12-56-56s25.128-56,56-56s56,25.12,56,56 S214.952,192.008,184.08,192.008z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 21\n    }\n  })))))), showPopup == entry.id ? /*#__PURE__*/React.createElement(Popup, {\n    className: \"mu-popup\",\n    latitude: entry.latitude,\n    longitude: entry.longitude,\n    closeButton: true,\n    closeOnClick: false,\n    dynamicPosition: true,\n    onClose: () => setShowPopup({}),\n    anchor: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup\",\n    style: {\n      width: '210px',\n      fontSize: '12px',\n      zIndex: '99',\n      position: 'relative',\n      zIndex: '300'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 21\n    }\n  }, entry.title), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 21\n    }\n  }, entry.comments), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 24\n    }\n  }, \"Author\"), \" - \", entry.author), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 24\n    }\n  }, \"Visited on:\"), \" \", new Date(entry.visitDate).toLocaleDateString()), entry.image && /*#__PURE__*/React.createElement(\"p\", {\n    onClick: () => setShow(entry.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: entry.image,\n    alt: entry.title,\n    width: \"210px\",\n    height: \"100px\",\n    title: \"Zoom in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 60\n    }\n  })), entry.image && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      position: 'absolute',\n      padding: '2px 7px',\n      height: '15px',\n      lineHeight: '15px',\n      borderRadius: '3px',\n      backgroundColor: 'white',\n      color: 'black',\n      bottom: '0%',\n      left: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 37\n    }\n  }, \"Click image to view more\"))) : null, // you can use Link instead of ..\n  isShown == entry.id ? /*#__PURE__*/React.createElement(ImageView, {\n    src: entry.image,\n    id: entry.id,\n    uid: logged.id,\n    name: logged.displayName,\n    log: entry,\n    offShow: val => setShow(val),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 15\n    }\n  }) : null, logged ? /*#__PURE__*/React.createElement(User, {\n    url: logged.photos[0].value,\n    userName: logged.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 24\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:3000/auth/facebook\",\n    style: {\n      position: 'absolute',\n      padding: '5px 10px',\n      // height:'25px',\n      lineHeight: '25px',\n      borderRadius: '3px',\n      backgroundColor: 'white',\n      color: 'black',\n      bottom: '5%',\n      left: '5%',\n      textDecoration: 'none',\n      color: '#4267b2'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 17\n    }\n  }, \"Login with facebook\")), /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setHint(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    href: \"http://localhost:3000/auth/facebook\",\n    style: {\n      position: 'absolute',\n      padding: '1px 10px',\n      // height:'25px',\n      lineHeight: '25px',\n      borderRadius: '50%',\n      backgroundColor: 'white',\n      color: 'black',\n      bottom: '3%',\n      left: '1%',\n      textDecoration: 'none',\n      color: '#4267b2'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 17\n    }\n  }, \"?\")), hint && /*#__PURE__*/React.createElement(Direction, {\n    off: val => setHint(val),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 24\n    }\n  }))));\n};\n\nexport default Mapbox;","map":{"version":3,"sources":["/Users/apple/Desktop/mapbox/src/App.js"],"names":["React","useState","useEffect","useRef","ReactMapGL","Marker","Popup","Source","Layer","ImageView","AddBox","User","Processing","Direction","Mapbox","exp","setExp","logEntries","setLogEntries","showPopup","setShowPopup","isShown","setShow","isAdd","setAdd","point","setPoint","pos","setPos","user","setUser","load","setLoad","logged","setLogged","hint","setHint","viewport","setViewport","width","height","latitude","longitude","zoom","getUser","console","log","fetch","method","credentials","headers","Accept","then","response","getEntries","status","json","Error","responseJson","expired","setTimeout","window","location","Date","getTime","catch","error","result","getUserPosition","getPosition","options","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","id","coords","title","comments","image","hash","history","replaceState","href","split","onClick","e","newVewport","lngLat","onDblClick","lng","lat","PlusIcon","handleClick","value","divStyle","margin","zIndex","divStyle1","animation","animationFillMode","fill","Point","padding","lineHeight","borderRadius","backgroundColor","color","top","left","toFixed","val","map","entry","cursor","fontSize","author","visitDate","toLocaleDateString","bottom","displayName","photos","textDecoration"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport ReactMapGL, { Marker, Popup, Source, Layer } from 'react-map-gl';\nimport ImageView from './components/ImageView';\nimport AddBox from './components/AddBox'\nimport User from './components/User'\nimport Processing from './components/Processing'\nimport Direction from './components/Direction'\n\n\n\n\nconst Mapbox = () => {\n  const [exp, setExp] = useState()\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [isShown , setShow] = useState(0)\n  const [isAdd, setAdd] = useState(false)\n  const [point, setPoint] = useState(false)\n  const [pos, setPos] = useState({})\n  const [user, setUser] = useState(false)\n  const [load, setLoad] = useState(false)\n  const [logged, setLogged] = useState({})\n  const [hint, setHint] = useState(false)\n // const [exp, setExp] = useState(60000 * 5)\n  \n\n  \n  \n  // const [addEntryLocation, setAddEntryLocation] = useState(null);\n\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 10.7781128,\n    longitude: 106.65325,\n    zoom: 12\n  });\n\n\n  const getUser = () => {\n    console.log(\"in getUser()\");\n    fetch(\"http://localhost:3000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    })\n      .then(response => {\n      console.log(\"in then1\");\n\n        getEntries()\n        if (response.status === 200) return response.json();\n        throw new Error(\"failed to authenticate user\");\n      })\n      .then(responseJson => {\n      console.log(\"in then2\");\n        console.log(responseJson.expired);\n        setLogged(responseJson.user)\n        setUser(true)\n        console.log(\"coi thuw\");\n        setTimeout(()=>window.location = 'http://localhost:9000',responseJson.expired - new Date().getTime());\n      })\n      .catch(error => {\n        setLogged(false)\n\n      });\n      \n  }\n  \n  const getEntries = async () => {\n    const response = await fetch('http://localhost:3000/api/logs')\n    const result = await response.json()\n    // setLogEntries(result)\n    console.log(result);\n    setLogEntries(result);\n    setLoad(true)\n    //setUser(result)\n    \n  };\n  \n\n  const getUserPosition = async() =>{\n    var getPosition = function (options) {\n      return new Promise(function (resolve, reject) {\n        navigator.geolocation.getCurrentPosition(resolve, reject, options);\n      });\n    }\n    const position = await getPosition();\n    const logEntries = [\n      {\n        id:1,\n        latitude:position.coords.latitude,\n        longitude:position.coords.longitude,\n        title: 'Bach Khoa University',\n        comments: 'This is the best university of Vietnam',\n        image: ' http://localhost:5000/img2.png'\n      }\n    ]\n    setLogEntries(logEntries);\n    console.log(logEntries);\n  }\n \n\n\n  useEffect( () => {\n    if (window.location.hash === \"#_=_\"){\n      window.history.replaceState \n          ? window.history.replaceState(null, null, window.location.href.split(\"#\")[0])\n          : window.location.hash = \"\";\n    }\n   \n    getUser()\n    // getEntries()\n    console.log(isShown);\n    console.log(exp);\n  }, []);\n\n  const onClick = (e) => {\n    const newVewport = {\n      ...viewport,\n      latitude: e.lngLat[1],\n      longitude: e.lngLat[0]\n    };\n  \n    setViewport(newVewport);\n  };\n  \n  const onDblClick = e => {\n    //for(let i in e.lngLat) console.log(i);\n    console.log('A click event has occurred at ' + e.lngLat[0]);\n    setPos({ lng: e.lngLat[0], lat: e.lngLat[1] })\n    console.log(isAdd);\n    if (isAdd) setPoint(true)\n\n  };\n\n  const PlusIcon = ({handleClick,value}) =>{\n    const divStyle  = {\n      position:'absolute',\n      margin:'15px 15px',\n      zIndex:'500',\n     \n    }\n    const divStyle1  = {\n      position:'absolute',\n      margin:'10px 15px',\n      zIndex:'500',\n      animation:'App-logo-spin 0s',\n      animationFillMode: 'forwards',\n      \n\n    }\n    return (\n      <div style={value ? divStyle1 : divStyle} onClick={()=>handleClick(!value)}> \n        <svg\n                  className=\"marker white\"\n                  style={{\n                    height: `${3 * viewport.zoom}px`,\n                    width: `${3 * viewport.zoom}px`,\n                  }}\n                  version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                  <g>\n                    <g>\n                      <path style={{fill:'white'}} d=\"m272 184c-4.417969 0-8-3.582031-8-8v-176h-80v176c0 4.417969-3.582031 8-8 8h-176v80h176c4.417969 0 8 3.582031 8 8v176h80v-176c0-4.417969 3.582031-8 8-8h176v-80zm0 0\"/>\n                    </g>\n                  </g>\n                </svg>\n      </div>\n    )\n  }\n  const Point = ({pos}) =>{\n    return (\n      <div style={{\n        position:'absolute',\n        padding:'2px 7px',\n        height:'15px',\n        lineHeight:'15px',\n        borderRadius:'3px',\n        backgroundColor:'white',\n        color:'black',\n        top:'2%',\n        left:'5%',\n       \n      }}>\n       {pos.lng.toFixed(4)} - {pos.lat.toFixed(4)}\n      </div>\n    )\n  }\n\n  return (\n    <ReactMapGL\n  \n      mapStyle=\"mapbox://styles/thecjreynolds/ck117fnjy0ff61cnsclwimyay\"\n      mapboxApiAccessToken={'pk.eyJ1IjoiemF5dHNldjUiLCJhIjoiY2tjaWk4cnc2MGtiMDJxazJwMGllOThlNyJ9.HciILC1tn3zdsXCuvzdRog'}\n      onViewportChange={setViewport}\n      doubleClickZoom={false}\n      // onClick={onClick}\n      scrollZoom={isShown ? false : true}\n      onDblClick={(e) => onDblClick(e)}\n      {...viewport}\n      \n    >\n      {/* <Direction/> */}\n      <>\n        <PlusIcon handleClick={(val) => setAdd(val)} value={isAdd} />\n        {\n          isAdd && <AddBox reload={()=>getEntries()} logged={user} />\n        }\n\n      </>\n      <>\n        {\n          point && <Point pos={pos} />\n        }\n      </>\n      {\n        !load && <Processing />\n      }\n      {\n        logEntries.map(entry => (\n          <React.Fragment key={entry.id}>\n            <Marker\n              latitude={entry.latitude}\n              longitude={entry.longitude}\n            >\n              <div\n                // onClick = {() =>{\n                //   console.log(\"You have clicked...\");\n                // }}\n                onClick={() => setShowPopup(entry.id)}\n                style={{\n                  \n                  cursor:'pointer'\n                }}\n              >\n                <svg\n                  className=\"marker white\"\n                  style={{\n                    height: `${3 * viewport.zoom}px`,\n                    width: `${3 * viewport.zoom}px`,\n                    cursor: 'pointer'\n                  }}\n                  version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                  <g>\n                    <g>\n                    <path style={{fill:'white'}} d=\"M184.08,0c-74.992,0-136,61.008-136,136c0,24.688,11.072,51.24,11.536,52.36c3.576,8.488,10.632,21.672,15.72,29.4\n                        l93.248,141.288c3.816,5.792,9.464,9.112,15.496,9.112s11.68-3.32,15.496-9.104l93.256-141.296\n                        c5.096-7.728,12.144-20.912,15.72-29.4c0.464-1.112,11.528-27.664,11.528-52.36C320.08,61.008,259.072,0,184.08,0z\n                        M293.8,182.152c-3.192,7.608-9.76,19.872-14.328,26.8l-93.256,141.296c-1.84,2.792-2.424,2.792-4.264,0L88.696,208.952\n                        c-4.568-6.928-11.136-19.2-14.328-26.808C74.232,181.816,64.08,157.376,64.08,136c0-66.168,53.832-120,120-120\n                        c66.168,0,120,53.832,120,120C304.08,157.408,293.904,181.912,293.8,182.152z\"/>\n                    <path style={{fill:'white'}} d=\"M184.08,64.008c-39.704,0-72,32.304-72,72c0,39.696,32.296,72,72,72c39.704,0,72-32.304,72-72\n                        C256.08,96.312,223.784,64.008,184.08,64.008z M184.08,192.008c-30.872,0-56-25.12-56-56s25.128-56,56-56s56,25.12,56,56\n                        S214.952,192.008,184.08,192.008z\"/>\n                    </g>\n                  </g>\n                </svg>\n              </div>\n            </Marker>\n            {\n              showPopup == entry.id ? (\n                <Popup\n                  className=\"mu-popup\"\n                  latitude={entry.latitude}\n                  longitude={entry.longitude}\n                  closeButton={true}\n                  closeOnClick={false}\n                  dynamicPosition={true}\n                  onClose={() => setShowPopup({})}\n                  anchor=\"top\" >\n                  <div className=\"popup\" style={{ width: '210px', fontSize: '12px', zIndex: '99', position: 'relative', zIndex: '300' }}>\n                    <h2>{entry.title}</h2>\n                    <p>{entry.comments}</p>\n                    <p><strong>Author</strong> - {entry.author}</p>\n                    <p><strong>Visited on:</strong> {new Date(entry.visitDate).toLocaleDateString()}</p>\n                    {\n                      entry.image &&\n                      <p onClick={() => setShow(entry.id)}><img\n                        src={entry.image}\n                        alt={entry.title}\n                        width='210px' height='100px'\n                        title=\"Zoom in\"\n                      />\n                      </p>\n                    }\n                    {entry.image && <p\n                      style={{\n                        position: 'absolute',\n                        padding: '2px 7px',\n                        height: '15px',\n                        lineHeight: '15px',\n                        borderRadius: '3px',\n                        backgroundColor: 'white',\n                        color: 'black',\n                        bottom: '0%',\n                        left: '2%',\n\n                      }}\n                    >Click image to view more</p>}\n                  </div>\n                </Popup>\n              ) : null\n            }\n            {// you can use Link instead of ..\n              isShown == entry.id ? (\n              <ImageView \n                src={entry.image} \n                id={entry.id} \n                uid={logged.id} \n                name={logged.displayName}\n                log={entry} \n                offShow={(val) => setShow(val)} />\n              ) : null\n            }\n            { logged ? <User url={logged.photos[0].value} userName={logged.displayName}/> : \n              <div className=\"login\">\n                < a \n                  href='http://localhost:3000/auth/facebook'\n                  style={{\n                    position: 'absolute',\n                    padding: '5px 10px',\n                    // height:'25px',\n                    lineHeight: '25px',\n                    borderRadius: '3px',\n                    backgroundColor: 'white',\n                    color: 'black',\n                    bottom: '5%',\n                    left: '5%',\n                    textDecoration:'none',\n                    color:'#4267b2'\n\n                  }}\n                >Login with facebook</a>\n              </div>\n            }\n            <div onClick={()=>setHint(true)} >\n                <p \n                  href='http://localhost:3000/auth/facebook'\n                  style={{\n                    position: 'absolute',\n                    padding: '1px 10px',\n                    // height:'25px',\n                    lineHeight: '25px',\n                    borderRadius: '50%',\n                    backgroundColor: 'white',\n                    color: 'black',\n                    bottom: '3%',\n                    left: '1%',\n                    textDecoration:'none',\n                    color:'#4267b2'\n\n                  }}\n                >?</p>\n              </div>\n              {hint && <Direction off={(val)=>setHint(val)}/>}\n          </React.Fragment>\n        ))\n      }\n     \n    </ReactMapGL>\n  );\n}\n\nexport default Mapbox;"]},"metadata":{},"sourceType":"module"}