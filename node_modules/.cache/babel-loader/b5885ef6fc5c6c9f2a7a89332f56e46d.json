{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/mapbox/src/App.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport ReactMapGL, { Marker, Popup, Source, Layer } from 'react-map-gl';\nimport ImageView from './components/ImageView';\nimport AddBox from './components/AddBox';\nimport User from './components/User';\nimport Processing from './components/Processing';\n\nconst Mapbox = () => {\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [isShown, setShow] = useState(0);\n  const [isAdd, setAdd] = useState(false);\n  const [point, setPoint] = useState(false);\n  const [pos, setPos] = useState({});\n  const [user, setUser] = useState([]);\n  const [load, setLoad] = useState(false);\n  const [logged, setLogged] = useState({}); // const [addEntryLocation, setAddEntryLocation] = useState(null);\n\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 10.7781128,\n    longitude: 106.65325,\n    zoom: 12\n  });\n  const [viewportChangeMethod, setViewportChangeMethod] = useState('flyTo');\n  const changeOptions = {\n    duration: 1000\n  };\n\n  const onChange = event => {\n    setViewportChangeMethod(event.target.value);\n  };\n\n  const getUser = () => {\n    fetch(\"http://localhost:3000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    }).then(response => {\n      getEntries();\n      if (response.status === 200) return response.json();\n      throw new Error(\"failed to authenticate user\");\n    }).then(responseJson => {\n      setLogged(responseJson.user);\n    }).catch(error => {\n      setLogged(false);\n    });\n  };\n\n  const getEntries = async () => {\n    const response = await fetch('http://localhost:3000/api/logs');\n    const result = await response.json(); // setLogEntries(result)\n\n    console.log(result);\n    setLogEntries(result);\n    setLoad(true); //setUser(result)\n  };\n\n  const getUserPosition = async () => {\n    var getPosition = function (options) {\n      return new Promise(function (resolve, reject) {\n        navigator.geolocation.getCurrentPosition(resolve, reject, options);\n      });\n    };\n\n    const position = await getPosition();\n    const logEntries = [{\n      id: 1,\n      latitude: position.coords.latitude,\n      longitude: position.coords.longitude,\n      title: 'Bach Khoa University',\n      comments: 'This is the best university of Vietnam',\n      image: ' http://localhost:5000/img2.png'\n    }];\n    setLogEntries(logEntries);\n    console.log(logEntries);\n  }; // const onClick = (event) => {\n  //   const { lngLat } = event;\n  //   const newVewport = {\n  //     ...viewport,\n  //     latitude: lngLat.lat,\n  //     longitude: lngLat.lng\n  //   };\n  //   setViewport(newVewport);\n  // };\n\n\n  useEffect(() => {\n    if (window.location.hash === \"#_=_\") {\n      window.history.replaceState ? window.history.replaceState(null, null, window.location.href.split(\"#\")[0]) : window.location.hash = \"\";\n    }\n\n    getUser(); // getEntries()\n\n    console.log(isShown);\n  }, []);\n\n  const onClick = event => {\n    const {\n      lngLat\n    } = event;\n    const newVewport = { ...viewport,\n      latitude: lngLat.lat,\n      longitude: lngLat.lng\n    };\n    setViewport(newVewport);\n  };\n\n  const onClick1 = e => {\n    //for(let i in e.lngLat) console.log(i);\n    console.log('A click event has occurred at ' + e.lngLat[0]);\n    setPos({\n      lng: e.lngLat[0],\n      lat: e.lngLat[1]\n    });\n    console.log(isAdd);\n    if (isAdd) setPoint(true);\n  };\n\n  const PlusIcon = ({\n    handleClick,\n    value\n  }) => {\n    const divStyle = {\n      position: 'absolute',\n      margin: '10px 15px',\n      zIndex: '500'\n    };\n    const divStyle1 = {\n      position: 'absolute',\n      margin: '10px 15px',\n      zIndex: '500',\n      animation: 'App-logo-spin 0s',\n      animationFillMode: 'forwards'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: value ? divStyle1 : divStyle,\n      onClick: () => handleClick(!value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      className: \"marker white\",\n      style: {\n        height: `${3 * viewport.zoom}px`,\n        width: `${3 * viewport.zoom}px`\n      },\n      version: \"1.1\",\n      id: \"Layer_1\",\n      x: \"0px\",\n      y: \"0px\",\n      viewBox: \"0 0 512 512\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      style: {\n        fill: 'white'\n      },\n      d: \"m272 184c-4.417969 0-8-3.582031-8-8v-176h-80v176c0 4.417969-3.582031 8-8 8h-176v80h176c4.417969 0 8 3.582031 8 8v176h80v-176c0-4.417969 3.582031-8 8-8h176v-80zm0 0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 23\n      }\n    })))));\n  };\n\n  const Point = ({\n    pos\n  }) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        padding: '2px 7px',\n        height: '15px',\n        lineHeight: '15px',\n        borderRadius: '3px',\n        backgroundColor: 'white',\n        color: 'black',\n        top: '2%',\n        left: '5%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }\n    }, pos.lng.toFixed(4), \" - \", pos.lat.toFixed(4));\n  };\n\n  return /*#__PURE__*/React.createElement(ReactMapGL, Object.assign({\n    mapStyle: \"mapbox://styles/thecjreynolds/ck117fnjy0ff61cnsclwimyay\",\n    mapboxApiAccessToken: 'pk.eyJ1IjoiemF5dHNldjUiLCJhIjoiY2tjaWk4cnc2MGtiMDJxazJwMGllOThlNyJ9.HciILC1tn3zdsXCuvzdRog',\n    onViewportChange: setViewport,\n    doubleClickZoom: false,\n    onClick: onClick,\n    scrollZoom: isShown ? false : true,\n    onDblClick: e => onClick1(e)\n  }, viewport, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PlusIcon, {\n    handleClick: val => setAdd(val),\n    value: isAdd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }), isAdd && /*#__PURE__*/React.createElement(AddBox, {\n    reload: () => getEntries(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 20\n    }\n  })), /*#__PURE__*/React.createElement(React.Fragment, null, point && /*#__PURE__*/React.createElement(Point, {\n    pos: pos,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 20\n    }\n  })), !load && /*#__PURE__*/React.createElement(Processing, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 18\n    }\n  }), logEntries.map(entry => /*#__PURE__*/React.createElement(React.Fragment, {\n    key: entry.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Marker, {\n    latitude: entry.latitude,\n    longitude: entry.longitude,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    // onClick = {() =>{\n    //   console.log(\"You have clicked...\");\n    // }}\n    onClick: () => setShowPopup(entry.id),\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"marker white\",\n    style: {\n      height: `${3 * viewport.zoom}px`,\n      width: `${3 * viewport.zoom}px`,\n      cursor: 'pointer'\n    },\n    version: \"1.1\",\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: 'white'\n    },\n    d: \"M184.08,0c-74.992,0-136,61.008-136,136c0,24.688,11.072,51.24,11.536,52.36c3.576,8.488,10.632,21.672,15.72,29.4 l93.248,141.288c3.816,5.792,9.464,9.112,15.496,9.112s11.68-3.32,15.496-9.104l93.256-141.296 c5.096-7.728,12.144-20.912,15.72-29.4c0.464-1.112,11.528-27.664,11.528-52.36C320.08,61.008,259.072,0,184.08,0z M293.8,182.152c-3.192,7.608-9.76,19.872-14.328,26.8l-93.256,141.296c-1.84,2.792-2.424,2.792-4.264,0L88.696,208.952 c-4.568-6.928-11.136-19.2-14.328-26.808C74.232,181.816,64.08,157.376,64.08,136c0-66.168,53.832-120,120-120 c66.168,0,120,53.832,120,120C304.08,157.408,293.904,181.912,293.8,182.152z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: 'white'\n    },\n    d: \"M184.08,64.008c-39.704,0-72,32.304-72,72c0,39.696,32.296,72,72,72c39.704,0,72-32.304,72-72 C256.08,96.312,223.784,64.008,184.08,64.008z M184.08,192.008c-30.872,0-56-25.12-56-56s25.128-56,56-56s56,25.12,56,56 S214.952,192.008,184.08,192.008z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 21\n    }\n  })))))), showPopup == entry.id ? /*#__PURE__*/React.createElement(Popup, {\n    className: \"mu-popup\",\n    latitude: entry.latitude,\n    longitude: entry.longitude,\n    closeButton: true,\n    closeOnClick: false,\n    dynamicPosition: true,\n    onClose: () => setShowPopup({}),\n    anchor: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup\",\n    style: {\n      width: '210px',\n      fontSize: '12px',\n      zIndex: '99',\n      position: 'relative',\n      zIndex: '300'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 21\n    }\n  }, entry.title), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 21\n    }\n  }, entry.comments), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 24\n    }\n  }, \"Author\"), \" - \", entry.author), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 24\n    }\n  }, \"Visited on:\"), \" \", new Date(entry.visitDate).toLocaleDateString()), entry.image && /*#__PURE__*/React.createElement(\"p\", {\n    onClick: () => setShow(entry.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: entry.image,\n    alt: entry.title,\n    width: \"210px\",\n    height: \"100px\",\n    title: \"Zoom in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 60\n    }\n  })), entry.image && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      position: 'absolute',\n      padding: '2px 7px',\n      height: '15px',\n      lineHeight: '15px',\n      borderRadius: '3px',\n      backgroundColor: 'white',\n      color: 'black',\n      bottom: '0%',\n      left: '2%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 37\n    }\n  }, \"Click image to view more\"))) : null, // you can use Link instead of ..\n  isShown == entry.id ? /*#__PURE__*/React.createElement(ImageView, {\n    src: entry.image,\n    id: entry.id,\n    log: entry,\n    offShow: val => setShow(val),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 15\n    }\n  }) : null, logged ? /*#__PURE__*/React.createElement(User, {\n    userName: logged.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 24\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:3000/auth/facebook\",\n    style: {\n      position: 'absolute',\n      padding: '5px 10px',\n      // height:'25px',\n      lineHeight: '25px',\n      borderRadius: '3px',\n      backgroundColor: 'white',\n      color: 'black',\n      bottom: '5%',\n      left: '2%',\n      textDecoration: 'none',\n      color: '#4267b2'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 17\n    }\n  }, \"Login with facebook\")))));\n};\n\nexport default Mapbox;","map":{"version":3,"sources":["/Users/apple/Desktop/mapbox/src/App.js"],"names":["React","useState","useEffect","useRef","ReactMapGL","Marker","Popup","Source","Layer","ImageView","AddBox","User","Processing","Mapbox","logEntries","setLogEntries","showPopup","setShowPopup","isShown","setShow","isAdd","setAdd","point","setPoint","pos","setPos","user","setUser","load","setLoad","logged","setLogged","viewport","setViewport","width","height","latitude","longitude","zoom","viewportChangeMethod","setViewportChangeMethod","changeOptions","duration","onChange","event","target","value","getUser","fetch","method","credentials","headers","Accept","then","response","getEntries","status","json","Error","responseJson","catch","error","result","console","log","getUserPosition","getPosition","options","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","id","coords","title","comments","image","window","location","hash","history","replaceState","href","split","onClick","lngLat","newVewport","lat","lng","onClick1","e","PlusIcon","handleClick","divStyle","margin","zIndex","divStyle1","animation","animationFillMode","fill","Point","padding","lineHeight","borderRadius","backgroundColor","color","top","left","toFixed","val","map","entry","cursor","fontSize","author","Date","visitDate","toLocaleDateString","bottom","displayName","textDecoration"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport ReactMapGL, { Marker, Popup, Source, Layer } from 'react-map-gl';\nimport ImageView from './components/ImageView';\nimport AddBox from './components/AddBox'\nimport User from './components/User'\nimport Processing from './components/Processing'\n\n\n\nconst Mapbox = () => {\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [isShown , setShow] = useState(0)\n  const [isAdd, setAdd] = useState(false)\n  const [point, setPoint] = useState(false)\n  const [pos, setPos] = useState({})\n  const [user, setUser] = useState([])\n  const [load, setLoad] = useState(false)\n  const [logged, setLogged] = useState({})\n\n  \n  \n  // const [addEntryLocation, setAddEntryLocation] = useState(null);\n\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 10.7781128,\n    longitude: 106.65325,\n    zoom: 12\n  });\n\n  const [viewportChangeMethod, setViewportChangeMethod] = useState('flyTo');\n const changeOptions = {\n    duration: 1000\n  };\n  \n  const onChange = (event) => {\n    setViewportChangeMethod(event.target.value);\n  };\n\n  const getUser = () => {\n    fetch(\"http://localhost:3000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    })\n      .then(response => {\n        getEntries()\n        if (response.status === 200) return response.json();\n        throw new Error(\"failed to authenticate user\");\n      })\n      .then(responseJson => {\n        setLogged(responseJson.user)\n      })\n      .catch(error => {\n        setLogged(false)\n\n      });\n  }\n  \n  const getEntries = async () => {\n    const response = await fetch('http://localhost:3000/api/logs')\n    const result = await response.json()\n    // setLogEntries(result)\n    console.log(result);\n    setLogEntries(result);\n    setLoad(true)\n    //setUser(result)\n    \n  };\n  \n\n  const getUserPosition = async() =>{\n    var getPosition = function (options) {\n      return new Promise(function (resolve, reject) {\n        navigator.geolocation.getCurrentPosition(resolve, reject, options);\n      });\n    }\n    const position = await getPosition();\n    const logEntries = [\n      {\n        id:1,\n        latitude:position.coords.latitude,\n        longitude:position.coords.longitude,\n        title: 'Bach Khoa University',\n        comments: 'This is the best university of Vietnam',\n        image: ' http://localhost:5000/img2.png'\n      }\n    ]\n    setLogEntries(logEntries);\n    console.log(logEntries);\n  }\n  // const onClick = (event) => {\n  //   const { lngLat } = event;\n  \n  //   const newVewport = {\n  //     ...viewport,\n  //     latitude: lngLat.lat,\n  //     longitude: lngLat.lng\n  //   };\n  \n  //   setViewport(newVewport);\n  // };\n\n\n  useEffect( () => {\n    if (window.location.hash === \"#_=_\"){\n      window.history.replaceState \n          ? window.history.replaceState(null, null, window.location.href.split(\"#\")[0])\n          : window.location.hash = \"\";\n    }\n    getUser()\n    // getEntries()\n   \n    console.log(isShown);\n  }, []);\n\n  const onClick = (event) => {\n    const { lngLat } = event;\n  \n    const newVewport = {\n      ...viewport,\n      latitude: lngLat.lat,\n      longitude: lngLat.lng\n    };\n  \n    setViewport(newVewport);\n  };\n  \n  const onClick1 = e => {\n    //for(let i in e.lngLat) console.log(i);\n    console.log('A click event has occurred at ' + e.lngLat[0]);\n    setPos({ lng: e.lngLat[0], lat: e.lngLat[1] })\n    console.log(isAdd);\n    if (isAdd) setPoint(true)\n\n  };\n\n  const PlusIcon = ({handleClick,value}) =>{\n    const divStyle  = {\n      position:'absolute',\n      margin:'10px 15px',\n      zIndex:'500',\n     \n    }\n    const divStyle1  = {\n      position:'absolute',\n      margin:'10px 15px',\n      zIndex:'500',\n      animation:'App-logo-spin 0s',\n      animationFillMode: 'forwards',\n      \n\n    }\n    return (\n      <div style={value ? divStyle1 : divStyle} onClick={()=>handleClick(!value)}> \n        <svg\n                  className=\"marker white\"\n                  style={{\n                    height: `${3 * viewport.zoom}px`,\n                    width: `${3 * viewport.zoom}px`,\n                  }}\n                  version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                  <g>\n                    <g>\n                      <path style={{fill:'white'}} d=\"m272 184c-4.417969 0-8-3.582031-8-8v-176h-80v176c0 4.417969-3.582031 8-8 8h-176v80h176c4.417969 0 8 3.582031 8 8v176h80v-176c0-4.417969 3.582031-8 8-8h176v-80zm0 0\"/>\n                    </g>\n                  </g>\n                </svg>\n      </div>\n    )\n  }\n  const Point = ({pos}) =>{\n    return (\n      <div style={{\n        position:'absolute',\n        padding:'2px 7px',\n        height:'15px',\n        lineHeight:'15px',\n        borderRadius:'3px',\n        backgroundColor:'white',\n        color:'black',\n        top:'2%',\n        left:'5%',\n       \n      }}>\n       {pos.lng.toFixed(4)} - {pos.lat.toFixed(4)}\n      </div>\n    )\n  }\n\n  return (\n    <ReactMapGL\n      \n      mapStyle=\"mapbox://styles/thecjreynolds/ck117fnjy0ff61cnsclwimyay\"\n      mapboxApiAccessToken={'pk.eyJ1IjoiemF5dHNldjUiLCJhIjoiY2tjaWk4cnc2MGtiMDJxazJwMGllOThlNyJ9.HciILC1tn3zdsXCuvzdRog'}\n      onViewportChange={setViewport}\n      doubleClickZoom ={false}\n       onClick={onClick}\n      scrollZoom={isShown ? false : true}\n      onDblClick={(e) => onClick1(e)}\n      {...viewport}\n      \n      // onClick={()=>flyTo([-71.06017112731934, 42.36272976137689], 2500)}\n    \n     // onDblClick={showAddMarkerPopup}\n    >\n      <>\n        <PlusIcon handleClick={(val) => setAdd(val)} value={isAdd} />\n        {\n          isAdd && <AddBox reload={()=>getEntries()} />\n        }\n\n      </>\n      <>\n        {\n          point && <Point pos={pos} />\n        }\n      </>\n      {\n        !load && <Processing />\n      }\n      {\n        logEntries.map(entry => (\n          <React.Fragment key={entry.id}>\n            <Marker\n              latitude={entry.latitude}\n              longitude={entry.longitude}\n            >\n              <div\n                // onClick = {() =>{\n                //   console.log(\"You have clicked...\");\n                // }}\n                onClick={() => setShowPopup(entry.id)}\n                style={{\n                  \n                  cursor:'pointer'\n                }}\n              >\n                <svg\n                  className=\"marker white\"\n                  style={{\n                    height: `${3 * viewport.zoom}px`,\n                    width: `${3 * viewport.zoom}px`,\n                    cursor: 'pointer'\n                  }}\n                  version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                  <g>\n                    <g>\n                    <path style={{fill:'white'}} d=\"M184.08,0c-74.992,0-136,61.008-136,136c0,24.688,11.072,51.24,11.536,52.36c3.576,8.488,10.632,21.672,15.72,29.4\n                        l93.248,141.288c3.816,5.792,9.464,9.112,15.496,9.112s11.68-3.32,15.496-9.104l93.256-141.296\n                        c5.096-7.728,12.144-20.912,15.72-29.4c0.464-1.112,11.528-27.664,11.528-52.36C320.08,61.008,259.072,0,184.08,0z\n                        M293.8,182.152c-3.192,7.608-9.76,19.872-14.328,26.8l-93.256,141.296c-1.84,2.792-2.424,2.792-4.264,0L88.696,208.952\n                        c-4.568-6.928-11.136-19.2-14.328-26.808C74.232,181.816,64.08,157.376,64.08,136c0-66.168,53.832-120,120-120\n                        c66.168,0,120,53.832,120,120C304.08,157.408,293.904,181.912,293.8,182.152z\"/>\n                    <path style={{fill:'white'}} d=\"M184.08,64.008c-39.704,0-72,32.304-72,72c0,39.696,32.296,72,72,72c39.704,0,72-32.304,72-72\n                        C256.08,96.312,223.784,64.008,184.08,64.008z M184.08,192.008c-30.872,0-56-25.12-56-56s25.128-56,56-56s56,25.12,56,56\n                        S214.952,192.008,184.08,192.008z\"/>\n                    </g>\n                  </g>\n                </svg>\n              </div>\n            </Marker>\n            {\n              showPopup == entry.id ? (\n                <Popup\n                  className=\"mu-popup\"\n                  latitude={entry.latitude}\n                  longitude={entry.longitude}\n                  closeButton={true}\n                  closeOnClick={false}\n                  dynamicPosition={true}\n                  onClose={() => setShowPopup({})}\n                  anchor=\"top\" >\n                  <div className=\"popup\" style={{ width: '210px', fontSize: '12px', zIndex: '99', position: 'relative', zIndex: '300' }}>\n                    <h2>{entry.title}</h2>\n                    <p>{entry.comments}</p>\n                    <p><strong>Author</strong> - {entry.author}</p>\n                    <p><strong>Visited on:</strong> {new Date(entry.visitDate).toLocaleDateString()}</p>\n                    {\n                      entry.image &&\n                      <p onClick={() => setShow(entry.id)}><img\n                        src={entry.image}\n                        alt={entry.title}\n                        width='210px' height='100px'\n                        title=\"Zoom in\"\n                      />\n                      </p>\n                    }\n                    {entry.image && <p\n                      style={{\n                        position: 'absolute',\n                        padding: '2px 7px',\n                        height: '15px',\n                        lineHeight: '15px',\n                        borderRadius: '3px',\n                        backgroundColor: 'white',\n                        color: 'black',\n                        bottom: '0%',\n                        left: '2%',\n\n                      }}\n                    >Click image to view more</p>}\n                  </div>\n                </Popup>\n              ) : null\n            }\n            {// you can use Link instead of ..\n              isShown == entry.id ? (\n              <ImageView src={entry.image} id={entry.id} log={entry} offShow={(val) => setShow(val)} />\n              ) : null\n            }\n            { logged ? <User  userName={logged.displayName}/> : \n              <div className=\"login\">\n                < a \n                  href='http://localhost:3000/auth/facebook'\n                  style={{\n                    position: 'absolute',\n                    padding: '5px 10px',\n                    // height:'25px',\n                    lineHeight: '25px',\n                    borderRadius: '3px',\n                    backgroundColor: 'white',\n                    color: 'black',\n                    bottom: '5%',\n                    left: '2%',\n                    textDecoration:'none',\n                    color:'#4267b2'\n\n                  }}\n                >Login with facebook</a>\n              </div>\n            }\n          </React.Fragment>\n        ))\n      }\n     \n    </ReactMapGL>\n  );\n}\n\nexport default Mapbox;"]},"metadata":{},"sourceType":"module"}