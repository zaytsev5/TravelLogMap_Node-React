{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Dropbox/My Mac (zaytsev.local)/Documents/mapbox/src/components/ImageView.js\";\nimport React, { useRef, useState, useEffect, useCallback } from 'react';\nimport Loading from './Loading';\nimport CarouselImage from './CarouseImage';\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\nconst ImageView = useCallback(({\n  src,\n  offShow,\n  log,\n  id,\n  uid,\n  name,\n  url\n}) => {\n  console.log(\"rerender\");\n  console.log(uid);\n  const [comments, setComment] = useState([]);\n  const [loaded, setLoad] = useState(false);\n  const [text, setText] = useState('');\n  const [userId, setUid] = useState(null);\n  const [index, setIndex] = useState(5);\n  const [moreComments, setMoreComments] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    console.log(\"its called\"); // console.log(messagesEndRef);\n\n    messagesEndRef.current.scrollIntoView({\n      behavior: \"instant\"\n    });\n  }; // let index = 0;\n\n\n  const getComments = async () => {\n    setMoreComments(true);\n    console.log(\"got thisÂ far 2\");\n\n    if (uid !== '') {\n      const response = await fetch(`http://localhost:3000/info/${uid}`, {\n        method: \"GET\",\n        credentials: \"include\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Credentials\": true\n        }\n      });\n      const result = await response.json();\n      setUid(result._id);\n    }\n\n    const res = await fetch(`http://localhost:3000/api/${id}/cmts/${index}`, {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    });\n    const comments = await res.json();\n    setComment(comments);\n    setLoad(true);\n    scrollToBottom();\n    setMoreComments(false);\n  };\n\n  const handleChange = e => {\n    setText(e.target.value); //  console.log(e.target.value);\n  };\n\n  const handleLoadMoreComments = () => {\n    setIndex(index + 5);\n  };\n\n  const handleClick = async e => {\n    console.log(id);\n    fetch('http://localhost:3000/auto', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"lid\": id,\n        \"uid\": userId,\n        \"title\": text,\n        \"body\": \"thisisbody\"\n      })\n    }).then(res => res.json()).then(result => {\n      if (result.done) {\n        // setLoad(false)\n        const body = \"nothing\";\n        const lid = id;\n        let uid = {\n          name: name,\n          image: url\n        };\n        const title = text;\n        const stringified = JSON.stringify({\n          lid,\n          uid,\n          title,\n          body\n        });\n        comments.push(JSON.parse(stringified)); //setComment(comments)\n\n        scrollToBottom(); //  setLoad(true)\n        //    getComments();\n\n        setText('');\n      } else {\n        alert(\"An error occured!\");\n      }\n    }); //  console.log(index);\n  }; // const ts = () =>{\n  //     console.log(\"hihi\");\n  // }\n\n\n  useEffect(() => {\n    scrollToBottom();\n    getComments();\n    console.log(\"hic hiic\");\n    console.log(index); // setComment(cmt)\n  }, [index]);\n  const styleDiv = {\n    width: '100%',\n    height: '100%',\n    zIndex: '100',\n    backgroundColor: 'rgb(0,0,0)',\n    backgroundColor: 'rgba(0,0,0,0.4)',\n\n    /* Black w/ opacity */\n    position: 'relative'\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: styleDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '700px',\n      minHeight: '550px',\n      position: 'absolute',\n      marginLeft: '30%',\n      marginTop: '100px',\n      transform: 'translate(-30%,0)',\n      opacity: '1'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CarouselImage, {\n    images: src,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '350px',\n      height: '610px',\n      position: 'absolute',\n      marginLeft: '65%',\n      marginTop: '50px',\n      // transform:'translate(-50%,0)',\n      opacity: '1',\n      borderRadius: '4px',\n      backgroundColor: '#FFF',\n      boxShadow: '0 1px 2px rgba(0,0,0,.1)',\n      padding: '15px 20px',\n      zIndex: '1000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'absolute',\n      right: '10px',\n      top: '0px',\n      // fontSize:'18px',\n      padding: '5px 5px',\n      cursor: 'pointer'\n    },\n    onClick: () => offShow(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    height: \"12px\",\n    viewBox: \"0 0 365.696 365.696\",\n    width: \"12px\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m243.1875 182.859375 113.132812-113.132813c12.5-12.5 12.5-32.765624 0-45.246093l-15.082031-15.082031c-12.503906-12.503907-32.769531-12.503907-45.25 0l-113.128906 113.128906-113.132813-113.152344c-12.5-12.5-32.765624-12.5-45.246093 0l-15.105469 15.082031c-12.5 12.503907-12.5 32.769531 0 45.25l113.152344 113.152344-113.128906 113.128906c-12.503907 12.503907-12.503907 32.769531 0 45.25l15.082031 15.082031c12.5 12.5 32.765625 12.5 45.246093 0l113.132813-113.132812 113.128906 113.132812c12.503907 12.5 32.769531 12.5 45.25 0l15.082031-15.082031c12.5-12.503906 12.5-32.769531 0-45.25zm0 0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 126\n    }\n  }))))), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      fontSize: '19px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, log.title.toUpperCase()), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      marginTop: '0',\n      marginBottom: '0',\n      fontWeight: 'bold',\n      fontSize: '17px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, log.comments), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      marginTop: '0',\n      marginBottom: '20px',\n      fontWeight: 'bold',\n      fontSize: '14px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, \"Author: \", log.author), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: '0',\n      fontSize: '13px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  }, \"Comments(\", comments.length, \")\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments\",\n    style: {\n      marginLeft: '15px',\n      height: '400px',\n      overflow: 'scroll'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, loaded ? comments.map((cmt, index) => /*#__PURE__*/React.createElement(React.Fragment, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"cmt-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: cmt.uid.image,\n    style: {\n      display: 'absolute',\n      marginTop: 'auto',\n      width: '25px',\n      height: '25px',\n      borderRadius: '50%',\n      marginRight: '5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    style: {\n      marginRight: '5px',\n      fontWeight: '700'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 43\n    }\n  }, cmt.uid.name, \": \")), cmt.title))) : /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    ref: messagesEndRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 21\n    }\n  }), loaded ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"action_comments\",\n    style: {\n      fontSize: '10px',\n      // position:'absolute',\n      marginLeft: '75%',\n      // marginTop:'-10px',\n      marginBottom: '5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => handleLoadMoreComments(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 25\n    }\n  }, moreComments ? 'loading more...' : 'more comments')) : '', uid && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"textarea\", {\n    style: {\n      width: '95%',\n      height: '35px',\n      fontSize: '14px',\n      marginTop: '5px'\n    },\n    placeholder: \"enter some your review..\",\n    type: \"text\",\n    rows: \"5\",\n    value: text,\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      backgroundColor: '#333',\n      border: '1px solid black',\n      borderRadius: '2px',\n      fontSize: '14px',\n      color: 'white',\n      marginBottom: '40px'\n    },\n    onClick: () => handleClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 29\n    }\n  }, \"Share your review\")))));\n}, [index]);\nexport default ImageView;","map":{"version":3,"sources":["/Users/apple/Dropbox/My Mac (zaytsev.local)/Documents/mapbox/src/components/ImageView.js"],"names":["React","useRef","useState","useEffect","useCallback","Loading","CarouselImage","BrowserRouter","Router","Link","ImageView","src","offShow","log","id","uid","name","url","console","comments","setComment","loaded","setLoad","text","setText","userId","setUid","index","setIndex","moreComments","setMoreComments","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","getComments","response","fetch","method","credentials","headers","Accept","result","json","_id","res","handleChange","e","target","value","handleLoadMoreComments","handleClick","body","JSON","stringify","then","done","lid","image","title","stringified","push","parse","alert","styleDiv","width","height","zIndex","backgroundColor","position","minHeight","marginLeft","marginTop","transform","opacity","borderRadius","boxShadow","padding","right","top","cursor","fontSize","toUpperCase","marginBottom","fontWeight","author","margin","length","overflow","map","cmt","display","marginRight","border","color"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect, useCallback } from 'react';\nimport Loading from './Loading'\nimport CarouselImage from './CarouseImage'\nimport {\n    BrowserRouter as Router,\n    Link,\n} from \"react-router-dom\";\n\n\nconst ImageView = useCallback(({ src, offShow, log, id, uid, name, url }) => {\n    console.log(\"rerender\");\n    console.log(uid);\n    const [comments, setComment] = useState([])\n    const [loaded, setLoad] = useState(false)\n    const [text, setText] = useState('')\n    const [userId, setUid] = useState(null)\n    const [index, setIndex] = useState(5)\n    const [moreComments, setMoreComments] = useState(false)\n    const messagesEndRef = useRef(null)\n\n    const scrollToBottom = () => {\n        console.log(\"its called\");\n        // console.log(messagesEndRef);\n        messagesEndRef.current.scrollIntoView({ behavior: \"instant\" })\n    }\n\n    // let index = 0;\n    const getComments = async () => {\n        setMoreComments(true)\n        console.log(\"got thisÂ far 2\");\n        if (uid !== '') {\n            const response = await fetch(`http://localhost:3000/info/${uid}`, {\n                method: \"GET\",\n                credentials: \"include\",\n                headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                    \"Access-Control-Allow-Credentials\": true\n                }\n            })\n            const result = await response.json();\n            setUid(result._id)\n        }\n        const res = await fetch(`http://localhost:3000/api/${id}/cmts/${index}`, {\n            method: \"GET\",\n            credentials: \"include\",\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n                \"Access-Control-Allow-Credentials\": true\n            }\n        })\n        const comments = await res.json();\n        setComment(comments)\n        setLoad(true)\n        scrollToBottom()\n        setMoreComments(false)\n    }\n    const handleChange = (e) => {\n        setText(e.target.value)\n        //  console.log(e.target.value);\n    }\n    const handleLoadMoreComments = () => {\n\n        setIndex(index + 5)\n    }\n\n    const handleClick = async (e) => {\n        console.log(id);\n        fetch('http://localhost:3000/auto', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                \"lid\": id,\n                \"uid\": userId,\n                \"title\": text,\n                \"body\": \"thisisbody\"\n            })\n        })\n            .then(res => res.json())\n            .then(result => {\n                if (result.done) {\n                    // setLoad(false)\n                    const body = \"nothing\"\n                    const lid = id\n                    let uid = {\n                        name: name,\n                        image: url\n                    }\n                    const title = text;\n                    const stringified = JSON.stringify({\n                        lid, uid, title, body\n                    })\n                    comments.push(JSON.parse(stringified))\n                    //setComment(comments)\n                    scrollToBottom()\n                    //  setLoad(true)\n                    //    getComments();\n                    setText('')\n                } else {\n                    alert(\"An error occured!\")\n                }\n            })\n        //  console.log(index);\n\n    }\n    // const ts = () =>{\n    //     console.log(\"hihi\");\n    // }\n    useEffect(() => {\n        scrollToBottom()\n        getComments();\n        console.log(\"hic hiic\");\n        console.log(index);\n\n\n        // setComment(cmt)\n    }, [index])\n    const styleDiv = {\n        width: '100%',\n        height: '100%',\n        zIndex: '100',\n        backgroundColor: 'rgb(0,0,0)',\n        backgroundColor: 'rgba(0,0,0,0.4)', /* Black w/ opacity */\n        position: 'relative',\n\n\n    }\n    return (\n\n        <div style={styleDiv} >\n            {/* {console.log(\"rerender\")} */}\n            <div style={{\n                width: '700px',\n                minHeight: '550px',\n                position: 'absolute',\n                marginLeft: '30%',\n                marginTop: '100px',\n                transform: 'translate(-30%,0)',\n                opacity: '1',\n\n            }}>\n                {/* <img src={src} width={700} height={500}  /> */}\n                <CarouselImage images={src} />\n\n            </div>\n            <div\n                style={{\n                    width: '350px',\n                    height: '610px',\n                    position: 'absolute',\n                    marginLeft: '65%',\n                    marginTop: '50px',\n                    // transform:'translate(-50%,0)',\n                    opacity: '1',\n                    borderRadius: '4px',\n                    backgroundColor: '#FFF',\n                    boxShadow: '0 1px 2px rgba(0,0,0,.1)',\n                    padding: '15px 20px',\n                    zIndex: '1000'\n\n                }}>\n                <Router>\n                    <Link to=\"/\">\n                        <div style={{\n                            position: 'absolute',\n                            right: '10px',\n                            top: '0px',\n                            // fontSize:'18px',\n                            padding: '5px 5px',\n                            cursor: 'pointer'\n                        }}\n                            onClick={() => offShow(false)}\n                        >\n                            <svg height=\"12px\" viewBox=\"0 0 365.696 365.696\" width=\"12px\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m243.1875 182.859375 113.132812-113.132813c12.5-12.5 12.5-32.765624 0-45.246093l-15.082031-15.082031c-12.503906-12.503907-32.769531-12.503907-45.25 0l-113.128906 113.128906-113.132813-113.152344c-12.5-12.5-32.765624-12.5-45.246093 0l-15.105469 15.082031c-12.5 12.503907-12.5 32.769531 0 45.25l113.152344 113.152344-113.128906 113.128906c-12.503907 12.503907-12.503907 32.769531 0 45.25l15.082031 15.082031c12.5 12.5 32.765625 12.5 45.246093 0l113.132813-113.132812 113.128906 113.132812c12.503907 12.5 32.769531 12.5 45.25 0l15.082031-15.082031c12.5-12.503906 12.5-32.769531 0-45.25zm0 0\" /></svg>\n                        </div>\n                    </Link>\n                </Router>\n                <h3 style={{\n                    fontSize: '19px'\n                }}>{log.title.toUpperCase()}</h3>\n                <p\n                    style={{\n                        marginTop: '0',\n                        marginBottom: '0',\n                        fontWeight: 'bold',\n                        fontSize: '17px'\n\n                    }}\n                >\n                    {log.comments}\n                </p>\n                <p\n                    style={{\n                        marginTop: '0',\n                        marginBottom: '20px',\n                        fontWeight: 'bold',\n                        fontSize: '14px'\n                    }}\n                >\n                    Author: {log.author}\n                </p>\n\n                <p\n                    style={{\n                        margin: '0',\n                        fontSize: '13px'\n                    }}\n                >\n                    Comments({comments.length})\n                </p>\n\n                <div className=\"comments\"\n\n                    style={{\n                        marginLeft: '15px',\n                        height: '400px',\n                        overflow: 'scroll'\n                    }}\n                >\n                    {loaded ?\n\n                        comments.map((cmt, index) => (\n                            <React.Fragment key={index}>\n\n                                <p className=\"cmt-row\">\n                                    <img src={cmt.uid.image} style={{\n                                        display: 'absolute',\n                                        marginTop: 'auto',\n                                        width: '25px',\n                                        height: '25px',\n                                        borderRadius: '50%',\n                                        marginRight: '5px'\n                                    }} />\n                                    <span><strong  style={{ marginRight: '5px',fontWeight:'700' }}>{cmt.uid.name}: </strong></span>{cmt.title}</p>\n                            </React.Fragment>\n                        ))\n\n\n                        : <Loading />}\n\n                    <div\n                        ref={messagesEndRef} >\n                    </div>\n                    {loaded ? <div className=\"action_comments\"\n                        style={{\n                            fontSize: '10px',\n                            // position:'absolute',\n                            marginLeft: '75%',\n                            // marginTop:'-10px',\n                            marginBottom: '5px'\n                        }}\n                    >\n                        <span onClick={() => handleLoadMoreComments()} >\n                            {moreComments ? 'loading more...' : 'more comments'}\n                        </span>\n                    </div> : ''\n                    }\n\n                    {\n\n                        uid &&\n                        <>\n\n                            <textarea\n                                style={{\n                                    width: '95%',\n                                    height: '35px',\n                                    fontSize: '14px',\n                                    marginTop: '5px'\n\n                                }}\n                                placeholder=\"enter some your review..\"\n                                type=\"text\"\n                                rows=\"5\"\n                                value={text}\n                                onChange={(e) => handleChange(e)}\n                            />\n\n\n                            <button\n                                style={{\n                                    backgroundColor: '#333',\n                                    border: '1px solid black',\n                                    borderRadius: '2px',\n                                    fontSize: '14px',\n                                    color: 'white',\n                                    marginBottom: '40px'\n\n\n                                }}\n                                onClick={() => handleClick()}\n                            >\n                                Share your review\n                            </button>\n                        </>\n                    }\n                </div>\n\n            </div>\n        </div>\n    )\n},[index])\n\nexport default ImageView;"]},"metadata":{},"sourceType":"module"}