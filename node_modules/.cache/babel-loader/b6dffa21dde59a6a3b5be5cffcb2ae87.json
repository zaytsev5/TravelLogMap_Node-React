{"ast":null,"code":"import _defineProperty from\"/Users/apple/Dropbox/My Mac (zaytsev.local)/Documents/mapbox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/apple/Dropbox/My Mac (zaytsev.local)/Documents/mapbox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/apple/Dropbox/My Mac (zaytsev.local)/Documents/mapbox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/apple/Dropbox/My Mac (zaytsev.local)/Documents/mapbox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState,useEffect}from'react';import Loading from'./Loading';import CarouselImage from'./CarouseImage';//  import 'bootstrap/dist/css/bootstrap.min.css';\nimport{BrowserRouter as Router// Switch,\n// Route,\n,Link//  useParams\n}from\"react-router-dom\";// import { CarouselImage } from 'react-bootstrap';\nvar ImageView=function ImageView(_ref){var _styleDiv;var src=_ref.src,offShow=_ref.offShow,log=_ref.log,id=_ref.id,uid=_ref.uid,name=_ref.name,url=_ref.url;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComment=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loaded=_useState4[0],setLoad=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),text=_useState6[0],setText=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),userId=_useState8[0],setUid=_useState8[1];var _useState9=useState(5),_useState10=_slicedToArray(_useState9,2),index=_useState10[0],setIndex=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),moreComments=_useState12[0],setMoreComments=_useState12[1];var messagesEndRef=useRef(null);// const [val, setVal] = useState('')\nvar scrollToBottom=function scrollToBottom(){console.log(\"its called\");// console.log(messagesEndRef);\nmessagesEndRef.current.scrollIntoView({behavior:\"instant\"});};// let index = 0;\nvar getComments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result,res,comments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setMoreComments(true);console.log(\"in\");_context.next=4;return fetch(\"http://localhost:3000/info/\".concat(uid));case 4:response=_context.sent;_context.next=7;return response.json();case 7:result=_context.sent;setUid(result._id);_context.next=11;return fetch(\"http://localhost:3000/api/\".concat(id,\"/cmts/\").concat(index));case 11:res=_context.sent;_context.next=14;return res.json();case 14:comments=_context.sent;setComment(comments);setLoad(true);scrollToBottom();setMoreComments(false);case 19:case\"end\":return _context.stop();}}},_callee);}));return function getComments(){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(e){setText(e.target.value);//  console.log(e.target.value);\n};var handleLoadMoreComments=function handleLoadMoreComments(){setIndex(index+5);};var handleClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(id);fetch('http://localhost:3000/auto',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"lid\":id,\"uid\":userId,\"title\":text,\"body\":\"thisisbody\"})}).then(function(res){return res.json();}).then(function(result){if(result.done){// setLoad(false)\nvar body=\"nothing\";var lid=id;var _uid={name:name,image:url};var title=text;var stringified=JSON.stringify({lid:lid,uid:_uid,title:title,body:body});comments.push(JSON.parse(stringified));//setComment(comments)\nscrollToBottom();//  setLoad(true)\n//    getComments();\nsetText('');}else{alert(\"An error occured!\");}});//  console.log(index);\ncase 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleClick(_x){return _ref3.apply(this,arguments);};}();// const ts = () =>{\n//     console.log(\"hihi\");\n// }\nuseEffect(function(){scrollToBottom();getComments();console.log(\"hic hiic\");console.log(index);// setComment(cmt)\n},[index]);var styleDiv=(_styleDiv={width:'100%',height:'100%',zIndex:'100',backgroundColor:'rgb(0,0,0)'},_defineProperty(_styleDiv,\"backgroundColor\",'rgba(0,0,0,0.4)'),_defineProperty(_styleDiv,\"position\",'relative'),_styleDiv);return/*#__PURE__*/React.createElement(\"div\",{style:styleDiv},/*#__PURE__*/React.createElement(\"div\",{style:{width:'700px',minHeight:'550px',position:'absolute',marginLeft:'30%',marginTop:'100px',transform:'translate(-30%,0)',opacity:'1'}},/*#__PURE__*/React.createElement(CarouselImage,{images:src})),/*#__PURE__*/React.createElement(\"div\",{style:{width:'350px',height:'610px',position:'absolute',marginLeft:'65%',marginTop:'50px',// transform:'translate(-50%,0)',\nopacity:'1',borderRadius:'4px',backgroundColor:'#FFF',boxShadow:'0 1px 2px rgba(0,0,0,.1)',padding:'15px 20px',zIndex:'1000'}},/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"div\",{style:{position:'absolute',right:'10px',top:'0px',// fontSize:'18px',\npadding:'5px 5px',cursor:'pointer'},onClick:function onClick(){return offShow(false);}},/*#__PURE__*/React.createElement(\"svg\",{height:\"12px\",viewBox:\"0 0 365.696 365.696\",width:\"12px\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"m243.1875 182.859375 113.132812-113.132813c12.5-12.5 12.5-32.765624 0-45.246093l-15.082031-15.082031c-12.503906-12.503907-32.769531-12.503907-45.25 0l-113.128906 113.128906-113.132813-113.152344c-12.5-12.5-32.765624-12.5-45.246093 0l-15.105469 15.082031c-12.5 12.503907-12.5 32.769531 0 45.25l113.152344 113.152344-113.128906 113.128906c-12.503907 12.503907-12.503907 32.769531 0 45.25l15.082031 15.082031c12.5 12.5 32.765625 12.5 45.246093 0l113.132813-113.132812 113.128906 113.132812c12.503907 12.5 32.769531 12.5 45.25 0l15.082031-15.082031c12.5-12.503906 12.5-32.769531 0-45.25zm0 0\"}))))),/*#__PURE__*/React.createElement(\"h3\",{style:{fontSize:'19px'}},log.title.toUpperCase()),/*#__PURE__*/React.createElement(\"p\",{style:{marginTop:'0',marginBottom:'0',fontWeight:'bold',fontSize:'17px'}},log.comments),/*#__PURE__*/React.createElement(\"p\",{style:{marginTop:'0',marginBottom:'20px',fontWeight:'bold',fontSize:'14px'}},\"Author: \",log.author),/*#__PURE__*/React.createElement(\"p\",{style:{margin:'0',fontSize:'13px'}},\"Comments(\",comments.length,\")\"),/*#__PURE__*/React.createElement(\"div\",{className:\"comments\",style:{marginLeft:'15px',height:'400px',overflow:'scroll'}},loaded?comments.map(function(cmt,index){return/*#__PURE__*/React.createElement(React.Fragment,{key:index},/*#__PURE__*/React.createElement(\"p\",{className:\"cmt-row\"},/*#__PURE__*/React.createElement(\"img\",{src:cmt.uid.image,style:{display:'absolute',marginTop:'auto',width:'25px',height:'25px',borderRadius:'50%',marginRight:'5px'}}),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"strong\",{style:{marginRight:'5px'}},cmt.uid.name,\": \")),cmt.title));}):/*#__PURE__*/React.createElement(Loading,null),/*#__PURE__*/React.createElement(\"div\",{// style={{\n//     fontSize:'10px',\n//     marginLeft:'50%',\n//     transform:'translate(-45%,0)',\n//     bottom:'20px',\n//     cursor:'pointer'\n// }}\n// onClick={()=>console.log('clicked loadmore')}\nref:messagesEndRef}),loaded?/*#__PURE__*/React.createElement(\"div\",{className:\"action_comments\",style:{fontSize:'10px',// position:'absolute',\nmarginLeft:'75%',// marginTop:'-10px',\nmarginBottom:'5px'}},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return handleLoadMoreComments();}},moreComments?'loading more...':'more comments')):'',uid&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"textarea\",{style:{width:'95%',height:'35px',fontSize:'14px',marginTop:'5px'},placeholder:\"enter some your review..\",type:\"text\",rows:\"5\",value:text,onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/React.createElement(\"button\",{style:{backgroundColor:'#333',border:'1px solid black',borderRadius:'2px',fontSize:'14px',color:'white',marginBottom:'40px'},onClick:function onClick(){return handleClick();}},\"Share your review\")))));};export default ImageView;","map":null,"metadata":{},"sourceType":"module"}