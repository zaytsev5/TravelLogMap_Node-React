{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/mapbox/src/components/ImageView.js\";\nimport React, { useRef, useState, useEffect } from 'react';\nimport Loading from './Loading';\nimport Carousel from './Carouse'; // import 'bootstrap/dist/css/bootstrap.min.css';\n\nimport { BrowserRouter as Router, Switch, Route, Link, useParams } from \"react-router-dom\"; // import { Carousel } from 'react-bootstrap';\n\nconst ImageView = ({\n  src,\n  offShow,\n  log,\n  id,\n  uid,\n  name,\n  url\n}) => {\n  const [comments, setComment] = useState([]);\n  const [loaded, setLoad] = useState(false);\n  const [text, setText] = useState('');\n  const [userId, setUid] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    console.log(\"gọi nè\");\n    messagesEndRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  let index = 0;\n\n  const getComments = async () => {\n    const response = await fetch(`http://localhost:3000/info/${uid}`);\n    const result = await response.json();\n    setUid(result._id);\n    const res = await fetch(`http://localhost:3000/api/${id}/cmts`);\n    const comments = await res.json();\n    setComment(comments);\n    setLoad(true);\n  };\n\n  const handleChange = e => {\n    setText(e.target.value); //  console.log(e.target.value);\n  };\n\n  const handleClick = async () => {\n    console.log(id);\n    fetch('http://localhost:3000/auto', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"lid\": id,\n        \"uid\": userId,\n        \"title\": text,\n        \"body\": \"thisisbody\"\n      })\n    }).then(res => res.json()).then(result => {\n      if (result.done) {\n        //  setLoad(false)\n        const body = \"nothing\";\n        const lid = id;\n        let uid = {\n          name: name,\n          image: url\n        };\n        const title = text;\n        const stringified = JSON.stringify({\n          lid,\n          uid,\n          title,\n          body\n        });\n        comments.push(JSON.parse(stringified)); // scrollToBottom()\n        //  setLoad(true)\n        //getComments();\n      } else {\n        alert(\"An error occured!\");\n      }\n    }); //  console.log(index);\n  };\n\n  const ts = () => {\n    console.log(\"hihi\");\n  };\n\n  useEffect(() => {\n    getComments();\n    console.log(\"hic hiic\"); // setComment(cmt)\n  }, []);\n  const styleDiv = {\n    width: '100%',\n    height: '100%',\n    zIndex: '100',\n    backgroundColor: 'rgb(0,0,0)',\n\n    /* Fallback color */\n    backgroundColor: 'rgba(0,0,0,0.4)',\n\n    /* Black w/ opacity */\n    position: 'relative'\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: styleDiv,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '400px',\n      height: '370px',\n      position: 'absolute',\n      marginLeft: '30%',\n      marginTop: '100px',\n      transform: 'translate(-50%,0)',\n      opacity: '1'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: src,\n    width: 700,\n    height: 500,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '350px',\n      height: '570px',\n      position: 'absolute',\n      marginLeft: '65%',\n      marginTop: '50px',\n      // transform:'translate(-50%,0)',\n      opacity: '1',\n      borderRadius: '4px',\n      backgroundColor: '#FFF',\n      boxShadow: '0 1px 2px rgba(0,0,0,.1)',\n      padding: '15px 20px',\n      zIndex: '1000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'absolute',\n      right: '10px',\n      top: '0px',\n      // fontSize:'18px',\n      padding: '5px 5px',\n      cursor: 'pointer'\n    },\n    onClick: () => offShow(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    height: \"12px\",\n    viewBox: \"0 0 365.696 365.696\",\n    width: \"12px\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m243.1875 182.859375 113.132812-113.132813c12.5-12.5 12.5-32.765624 0-45.246093l-15.082031-15.082031c-12.503906-12.503907-32.769531-12.503907-45.25 0l-113.128906 113.128906-113.132813-113.152344c-12.5-12.5-32.765624-12.5-45.246093 0l-15.105469 15.082031c-12.5 12.503907-12.5 32.769531 0 45.25l113.152344 113.152344-113.128906 113.128906c-12.503907 12.503907-12.503907 32.769531 0 45.25l15.082031 15.082031c12.5 12.5 32.765625 12.5 45.246093 0l113.132813-113.132812 113.128906 113.132812c12.503907 12.5 32.769531 12.5 45.25 0l15.082031-15.082031c12.5-12.503906 12.5-32.769531 0-45.25zm0 0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 126\n    }\n  }))))), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, log.title.toUpperCase()), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      marginTop: '0',\n      marginBottom: '0',\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, log.comments), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      marginTop: '0',\n      marginBottom: '0',\n      marginLeft: '55%',\n      fontWeight: 'bold',\n      fontSize: '15px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, \"Author: \", log.author), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      margin: '0',\n      fontSize: '14px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }, \"Comments(\", comments.length, \")\"), loaded ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments\",\n    style: {\n      marginLeft: '15px',\n      height: '400px',\n      overflow: 'scroll'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 26\n    }\n  }, comments.map((cmt, index) => /*#__PURE__*/React.createElement(React.Fragment, {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"cmt-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: cmt.uid.image,\n    style: {\n      display: 'absolute',\n      marginTop: 'auto',\n      width: '25px',\n      height: '25px',\n      borderRadius: '50%',\n      marginRight: '5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 36\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    style: {\n      marginRight: '5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 42\n    }\n  }, cmt.uid.name, \": \")), cmt.title))), /*#__PURE__*/React.createElement(\"div\", {\n    ref: messagesEndRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }), uid && /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(\"textarea\", {\n    style: {\n      width: '95%',\n      height: '35px'\n    },\n    placeholder: \"enter some your review..\",\n    type: \"text\",\n    rows: \"5\",\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      backgroundColor: 'white',\n      border: '1px solid black',\n      borderRadius: '2px'\n    },\n    onClick: () => handleClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 29\n    }\n  }, \"Add more\")) : /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 26\n    }\n  })));\n};\n\nexport default ImageView;","map":{"version":3,"sources":["/Users/apple/Documents/mapbox/src/components/ImageView.js"],"names":["React","useRef","useState","useEffect","Loading","Carousel","BrowserRouter","Router","Switch","Route","Link","useParams","ImageView","src","offShow","log","id","uid","name","url","comments","setComment","loaded","setLoad","text","setText","userId","setUid","messagesEndRef","scrollToBottom","console","current","scrollIntoView","behavior","index","getComments","response","fetch","result","json","_id","res","handleChange","e","target","value","handleClick","method","headers","body","JSON","stringify","then","done","lid","image","title","stringified","push","parse","alert","ts","styleDiv","width","height","zIndex","backgroundColor","position","marginLeft","marginTop","transform","opacity","borderRadius","boxShadow","padding","right","top","cursor","toUpperCase","marginBottom","fontWeight","fontSize","author","margin","length","overflow","map","cmt","display","marginRight","border"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,QAAP,MAAqB,WAArB,C,CACA;;AACA,SACIC,aAAa,IAAIC,MADrB,EAEIC,MAFJ,EAGIC,KAHJ,EAIIC,IAJJ,EAKIC,SALJ,QAMS,kBANT,C,CAOA;;AAGA,MAAMC,SAAS,GAAI,CAAC;AAACC,EAAAA,GAAD;AAAKC,EAAAA,OAAL;AAAaC,EAAAA,GAAb;AAAiBC,EAAAA,EAAjB;AAAoBC,EAAAA,GAApB;AAAwBC,EAAAA,IAAxB;AAA6BC,EAAAA;AAA7B,CAAD,KAAsC;AACrD,QAAM,CAACC,QAAD,EAAWC,UAAX,IAAyBnB,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACoB,MAAD,EAASC,OAAT,IAAoBrB,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACsB,IAAD,EAAOC,OAAP,IAAkBvB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACwB,MAAD,EAASC,MAAT,IAAmBzB,QAAQ,CAAC,IAAD,CAAjC;AACA,QAAM0B,cAAc,GAAG3B,MAAM,CAAC,IAAD,CAA7B;;AAEA,QAAM4B,cAAc,GAAG,MAAM;AACzBC,IAAAA,OAAO,CAACf,GAAR,CAAY,QAAZ;AACAa,IAAAA,cAAc,CAACG,OAAf,CAAuBC,cAAvB,CAAsC;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAtC;AACH,GAHD;;AAKA,MAAIC,KAAK,GAAG,CAAZ;;AACA,QAAMC,WAAW,GAAG,YAAW;AAC3B,UAAMC,QAAQ,GAAI,MAAMC,KAAK,CAAE,8BAA6BpB,GAAI,EAAnC,CAA7B;AACA,UAAMqB,MAAM,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAArB;AACAZ,IAAAA,MAAM,CAACW,MAAM,CAACE,GAAR,CAAN;AACA,UAAMC,GAAG,GAAG,MAAMJ,KAAK,CAAE,6BAA4BrB,EAAG,OAAjC,CAAvB;AACA,UAAMI,QAAQ,GAAG,MAAMqB,GAAG,CAACF,IAAJ,EAAvB;AACAlB,IAAAA,UAAU,CAACD,QAAD,CAAV;AACAG,IAAAA,OAAO,CAAC,IAAD,CAAP;AACH,GARD;;AASA,QAAMmB,YAAY,GAAIC,CAAD,IAAM;AACvBlB,IAAAA,OAAO,CAACkB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAP,CADuB,CAEzB;AACD,GAHD;;AAIA,QAAMC,WAAW,GAAG,YAAW;AAC3BhB,IAAAA,OAAO,CAACf,GAAR,CAAYC,EAAZ;AACAqB,IAAAA,KAAK,CAAC,4BAAD,EAA8B;AAC/BU,MAAAA,MAAM,EAAE,MADuB;AAE/BC,MAAAA,OAAO,EAAC;AACJ,wBAAiB;AADb,OAFuB;AAK/BC,MAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAChB,eAAMnC,EADU;AAEhB,eAAMU,MAFU;AAGhB,iBAAQF,IAHQ;AAIhB,gBAAO;AAJS,OAAf;AAL0B,KAA9B,CAAL,CAYC4B,IAZD,CAYMX,GAAG,IAAIA,GAAG,CAACF,IAAJ,EAZb,EAaCa,IAbD,CAaMd,MAAM,IAAG;AACX,UAAGA,MAAM,CAACe,IAAV,EAAe;AACd;AACG,cAAMJ,IAAI,GAAG,SAAb;AACA,cAAMK,GAAG,GAAGtC,EAAZ;AACA,YAAIC,GAAG,GAAG;AACNC,UAAAA,IAAI,EAACA,IADC;AAENqC,UAAAA,KAAK,EAACpC;AAFA,SAAV;AAIA,cAAMqC,KAAK,GAAEhC,IAAb;AACA,cAAMiC,WAAW,GAAGP,IAAI,CAACC,SAAL,CAAe;AAC/BG,UAAAA,GAD+B;AAC3BrC,UAAAA,GAD2B;AACvBuC,UAAAA,KADuB;AACjBP,UAAAA;AADiB,SAAf,CAApB;AAGA7B,QAAAA,QAAQ,CAACsC,IAAT,CAAcR,IAAI,CAACS,KAAL,CAAWF,WAAX,CAAd,EAZW,CAaZ;AACH;AACI;AACH,OAhBD,MAgBK;AACDG,QAAAA,KAAK,CAAC,mBAAD,CAAL;AACH;AACJ,KAjCD,EAF2B,CAoC7B;AAED,GAtCD;;AAuCA,QAAMC,EAAE,GAAG,MAAK;AACZ/B,IAAAA,OAAO,CAACf,GAAR,CAAY,MAAZ;AACH,GAFD;;AAGAZ,EAAAA,SAAS,CAAC,MAAI;AACVgC,IAAAA,WAAW;AACXL,IAAAA,OAAO,CAACf,GAAR,CAAY,UAAZ,EAFU,CAIV;AACH,GALQ,EAKP,EALO,CAAT;AAMA,QAAM+C,QAAQ,GAAG;AACbC,IAAAA,KAAK,EAAC,MADO;AAEbC,IAAAA,MAAM,EAAC,MAFM;AAGbC,IAAAA,MAAM,EAAC,KAHM;AAIbC,IAAAA,eAAe,EAAE,YAJJ;;AAIkB;AAC/BA,IAAAA,eAAe,EAAE,iBALJ;;AAKuB;AACpCC,IAAAA,QAAQ,EAAC;AANI,GAAjB;AASA,sBAEI;AAAK,IAAA,KAAK,EAAEL,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACG;AAAK,IAAA,KAAK,EAAE;AACRC,MAAAA,KAAK,EAAC,OADE;AAERC,MAAAA,MAAM,EAAC,OAFC;AAGRG,MAAAA,QAAQ,EAAC,UAHD;AAIRC,MAAAA,UAAU,EAAC,KAJH;AAKRC,MAAAA,SAAS,EAAC,OALF;AAMRC,MAAAA,SAAS,EAAC,mBANF;AAORC,MAAAA,OAAO,EAAC;AAPA,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAUK;AAAK,IAAA,GAAG,EAAE1D,GAAV;AAAe,IAAA,KAAK,EAAE,GAAtB;AAA2B,IAAA,MAAM,EAAE,GAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVL,CADH,eAeG;AACC,IAAA,KAAK,EAAE;AACHkD,MAAAA,KAAK,EAAC,OADH;AAEHC,MAAAA,MAAM,EAAC,OAFJ;AAGHG,MAAAA,QAAQ,EAAC,UAHN;AAIHC,MAAAA,UAAU,EAAC,KAJR;AAKHC,MAAAA,SAAS,EAAC,MALP;AAMH;AACAE,MAAAA,OAAO,EAAC,GAPL;AAQHC,MAAAA,YAAY,EAAG,KARZ;AASHN,MAAAA,eAAe,EAAC,MATb;AAUHO,MAAAA,SAAS,EAAC,0BAVP;AAWHC,MAAAA,OAAO,EAAC,WAXL;AAYHT,MAAAA,MAAM,EAAC;AAZJ,KADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAgBK,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,KAAK,EAAE;AACRE,MAAAA,QAAQ,EAAE,UADF;AAERQ,MAAAA,KAAK,EAAE,MAFC;AAGRC,MAAAA,GAAG,EAAE,KAHG;AAIR;AACAF,MAAAA,OAAO,EAAE,SALD;AAMRG,MAAAA,MAAM,EAAE;AANA,KAAZ;AAQA,IAAA,OAAO,EAAE,MAAM/D,OAAO,CAAC,KAAD,CARtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAUI;AAAK,IAAA,MAAM,EAAC,MAAZ;AAAmB,IAAA,OAAO,EAAC,qBAA3B;AAAiD,IAAA,KAAK,EAAC,MAAvD;AAA8D,IAAA,KAAK,EAAC,4BAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAiG;AAAM,IAAA,CAAC,EAAC,6kBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAjG,CAVJ,CADJ,CADJ,CAhBL,eAgCK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKC,GAAG,CAACyC,KAAJ,CAAUsB,WAAV,EAAL,CAhCL,eAiCK;AACI,IAAA,KAAK,EAAE;AACHT,MAAAA,SAAS,EAAC,GADP;AAEHU,MAAAA,YAAY,EAAC,GAFV;AAGHC,MAAAA,UAAU,EAAC;AAHR,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOEjE,GAAG,CAACK,QAPN,CAjCL,eA0CK;AACI,IAAA,KAAK,EAAE;AACHiD,MAAAA,SAAS,EAAC,GADP;AAEHU,MAAAA,YAAY,EAAC,GAFV;AAGHX,MAAAA,UAAU,EAAC,KAHR;AAIHY,MAAAA,UAAU,EAAC,MAJR;AAKHC,MAAAA,QAAQ,EAAC;AALN,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBASYlE,GAAG,CAACmE,MAThB,CA1CL,eAsDK;AACI,IAAA,KAAK,EAAE;AACJC,MAAAA,MAAM,EAAC,GADH;AAEJF,MAAAA,QAAQ,EAAC;AAFL,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMa7D,QAAQ,CAACgE,MANtB,MAtDL,EA+DK9D,MAAM,gBAAG;AAAK,IAAA,SAAS,EAAC,UAAf;AAEL,IAAA,KAAK,EAAE;AACH8C,MAAAA,UAAU,EAAC,MADR;AAEHJ,MAAAA,MAAM,EAAC,OAFJ;AAGHqB,MAAAA,QAAQ,EAAC;AAHN,KAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASDjE,QAAQ,CAACkE,GAAT,CAAa,CAACC,GAAD,EAAKrD,KAAL,kBACT,oBAAC,KAAD,CAAO,QAAP;AAAgB,IAAA,GAAG,EAAEA,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEA;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACQ;AAAK,IAAA,GAAG,EAAEqD,GAAG,CAACtE,GAAJ,CAAQsC,KAAlB;AAAyB,IAAA,KAAK,EAAE;AAC5BiC,MAAAA,OAAO,EAAC,UADoB;AAE5BnB,MAAAA,SAAS,EAAC,MAFkB;AAG5BN,MAAAA,KAAK,EAAE,MAHqB;AAI5BC,MAAAA,MAAM,EAAE,MAJoB;AAK5BQ,MAAAA,YAAY,EAAE,KALc;AAM5BiB,MAAAA,WAAW,EAAC;AANgB,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADR,eASO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAM;AAAQ,IAAA,KAAK,EAAE;AAACA,MAAAA,WAAW,EAAC;AAAb,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqCF,GAAG,CAACtE,GAAJ,CAAQC,IAA7C,OAAN,CATP,EASkFqE,GAAG,CAAC/B,KATtF,CAFA,CADJ,CATC,eA0BL;AAAK,IAAA,GAAG,EAAE5B,cAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BK,EA4BAX,GAAG,iBAAI,yCA5BP,eA8CL;AACY,IAAA,KAAK,EAAE;AACH8C,MAAAA,KAAK,EAAE,KADJ;AAEHC,MAAAA,MAAM,EAAE;AAFL,KADnB;AAMY,IAAA,WAAW,EAAC,0BANxB;AAOY,IAAA,IAAI,EAAC,MAPjB;AAQY,IAAA,IAAI,EAAC,GARjB;AASY,IAAA,QAAQ,EAAGrB,CAAD,IAAOD,YAAY,CAACC,CAAD,CATzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA9CK,eA2DG;AACI,IAAA,KAAK,EAAE;AACHuB,MAAAA,eAAe,EAAE,OADd;AAEHwB,MAAAA,MAAM,EAAE,iBAFL;AAGHlB,MAAAA,YAAY,EAAE;AAHX,KADX;AAMI,IAAA,OAAO,EAAE,MAAM1B,WAAW,EAN9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA3DH,CAAH,gBAsEG,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArId,CAfH,CAFJ;AA2JH,CA9OD;;AAgPA,eAAelC,SAAf","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport Loading from './Loading'\nimport Carousel from './Carouse'\n// import 'bootstrap/dist/css/bootstrap.min.css';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useParams\n  } from \"react-router-dom\";\n// import { Carousel } from 'react-bootstrap';\n  \n\nconst ImageView  = ({src,offShow,log,id,uid,name,url}) =>{\n    const [comments, setComment] = useState([])\n    const [loaded, setLoad] = useState(false)\n    const [text, setText] = useState('')\n    const [userId, setUid] = useState(null)\n    const messagesEndRef = useRef(null)\n\n    const scrollToBottom = () => {\n        console.log(\"gọi nè\");\n        messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" })\n    }\n\n    let index = 0;\n    const getComments = async () =>{\n        const response =  await fetch(`http://localhost:3000/info/${uid}`)\n        const result = await response.json();\n        setUid(result._id)\n        const res = await fetch(`http://localhost:3000/api/${id}/cmts`)\n        const comments = await res.json();\n        setComment(comments)\n        setLoad(true)\n    }\n    const handleChange = (e)=> {\n        setText(e.target.value)\n      //  console.log(e.target.value);\n    }\n    const handleClick = async () =>{\n        console.log(id);\n        fetch('http://localhost:3000/auto',{\n            method: 'POST',\n            headers:{\n                'Content-Type' : 'application/json'\n            },\n            body:JSON.stringify({\n                \"lid\":id,\n                \"uid\":userId,\n                \"title\":text,\n                \"body\":\"thisisbody\"\n            })\n        })\n        .then(res => res.json())\n        .then(result =>{\n            if(result.done){\n             //  setLoad(false)\n                const body = \"nothing\"\n                const lid = id\n                let uid = {\n                    name:name,\n                    image:url\n                }\n                const title =text;\n                const stringified = JSON.stringify({\n                    lid,uid,title,body\n                })\n                comments.push(JSON.parse(stringified))\n               // scrollToBottom()\n            //  setLoad(true)\n                //getComments();\n            }else{\n                alert(\"An error occured!\")\n            }\n        })\n      //  console.log(index);\n        \n    }\n    const ts = () =>{\n        console.log(\"hihi\");\n    }\n    useEffect(()=>{\n        getComments();\n        console.log(\"hic hiic\");\n\n        // setComment(cmt)\n    },[])\n    const styleDiv = {\n        width:'100%',\n        height:'100%',\n        zIndex:'100',\n        backgroundColor: 'rgb(0,0,0)', /* Fallback color */\n        backgroundColor: 'rgba(0,0,0,0.4)', /* Black w/ opacity */\n        position:'relative',\n        \n    }\n    return (\n        \n        <div style={styleDiv} >\n           <div style={{\n               width:'400px',\n               height:'370px',\n               position:'absolute',\n               marginLeft:'30%',\n               marginTop:'100px',\n               transform:'translate(-50%,0)',\n               opacity:'1',\n               \n            }}>\n                <img src={src} width={700} height={500}  />\n            {/* <Carousel width={700} height={500} /> */}\n               \n           </div>\n           <div\n            style={{\n                width:'350px',\n                height:'570px',\n                position:'absolute',\n                marginLeft:'65%',\n                marginTop:'50px',\n                // transform:'translate(-50%,0)',\n                opacity:'1',\n                borderRadius : '4px',\n                backgroundColor:'#FFF',\n                boxShadow:'0 1px 2px rgba(0,0,0,.1)',\n                padding:'15px 20px',\n                zIndex:'1000'\n\n            }}>\n                <Router>\n                    <Link to=\"/\">\n                        <div style={{\n                            position: 'absolute',\n                            right: '10px',\n                            top: '0px',\n                            // fontSize:'18px',\n                            padding: '5px 5px',\n                            cursor: 'pointer'\n                        }}\n                        onClick={() => offShow(false)}\n                        >\n                            <svg height=\"12px\" viewBox=\"0 0 365.696 365.696\" width=\"12px\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m243.1875 182.859375 113.132812-113.132813c12.5-12.5 12.5-32.765624 0-45.246093l-15.082031-15.082031c-12.503906-12.503907-32.769531-12.503907-45.25 0l-113.128906 113.128906-113.132813-113.152344c-12.5-12.5-32.765624-12.5-45.246093 0l-15.105469 15.082031c-12.5 12.503907-12.5 32.769531 0 45.25l113.152344 113.152344-113.128906 113.128906c-12.503907 12.503907-12.503907 32.769531 0 45.25l15.082031 15.082031c12.5 12.5 32.765625 12.5 45.246093 0l113.132813-113.132812 113.128906 113.132812c12.503907 12.5 32.769531 12.5 45.25 0l15.082031-15.082031c12.5-12.503906 12.5-32.769531 0-45.25zm0 0\" /></svg>\n                        </div>\n                    </Link>\n                </Router>\n                <h3>{log.title.toUpperCase()}</h3>\n                <p\n                    style={{\n                        marginTop:'0',\n                        marginBottom:'0',\n                        fontWeight:'bold'\n                    }}\n                >\n                 {log.comments}\n                </p>\n                <p\n                    style={{\n                        marginTop:'0',\n                        marginBottom:'0',\n                        marginLeft:'55%',\n                        fontWeight:'bold',\n                        fontSize:'15px'\n                    }}\n                >\n                   Author: {log.author}\n                </p>\n              \n                <p\n                    style={{\n                       margin:'0',\n                       fontSize:'14px'\n                    }}\n                >\n                   Comments({comments.length})\n                </p>\n               {\n                loaded ? <div className=\"comments\" \n              \n                    style={{\n                        marginLeft:'15px',\n                        height:'400px',\n                        overflow:'scroll'\n                    }}  \n                    >\n                    {\n                        comments.map((cmt,index) =>(\n                            <React.Fragment key={index}>\n                            \n                            <p className=\"cmt-row\">\n                                    <img src={cmt.uid.image} style={{\n                                        display:'absolute',\n                                        marginTop:'auto',\n                                        width: '25px',\n                                        height: '25px',\n                                        borderRadius: '50%',\n                                        marginRight:'5px'\n                                    }} />\n                                   <span><strong style={{marginRight:'5px'}}>{cmt.uid.name}: </strong></span>{cmt.title}</p>\n                            </React.Fragment>\n                        ))\n                        \n                    }\n                    <div ref={messagesEndRef} />\n                    \n                        {uid && <>\n                            {/* <div\n                                style={{\n                                    height:'50px',\n                                    lineHeight:'50px',\n                                    marginBottom:'30px',\n                                    textAlign:'center'\n                                }}>\n                                <img src={url} style={{\n                                    width: '25px',\n                                    height: '25px',\n                                    borderRadius: '50%',\n                                    marginTop:'15px'\n\n                                }} /> */}\n                                \n                        </>\n                        }\n                    <textarea\n                                style={{\n                                    width: '95%',\n                                    height: '35px',\n                                  \n                                }}\n                                placeholder=\"enter some your review..\"\n                                type=\"text\"\n                                rows=\"5\"\n                                onChange={(e) => handleChange(e)}\n                            />\n                            {/* </div> */}\n                         \n                            <button\n                                style={{\n                                    backgroundColor: 'white',\n                                    border: '1px solid black',\n                                    borderRadius: '2px'\n                                }}\n                                onClick={() => handleClick()}\n                            >\n                                Add more\n                            </button>\n                    \n                </div> : <Loading/>\n                }       \n           </div>\n        </div>\n    )\n}\n\nexport default ImageView;"]},"metadata":{},"sourceType":"module"}