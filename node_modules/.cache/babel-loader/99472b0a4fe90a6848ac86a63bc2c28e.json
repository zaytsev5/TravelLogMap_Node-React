{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport DraggableControl from './draggable-control';\nimport { crispPixel } from '../utils/crisp-pixel';\nvar propTypes = Object.assign({}, DraggableControl.propTypes, {\n  className: PropTypes.string,\n  longitude: PropTypes.number.isRequired,\n  latitude: PropTypes.number.isRequired\n});\nvar defaultProps = Object.assign({}, DraggableControl.defaultProps, {\n  className: ''\n});\n\nvar Marker = function (_DraggableControl) {\n  _inherits(Marker, _DraggableControl);\n\n  var _super = _createSuper(Marker);\n\n  function Marker() {\n    var _this;\n\n    _classCallCheck(this, Marker);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"_control\", null);\n\n    return _this;\n  }\n\n  _createClass(Marker, [{\n    key: \"_getPosition\",\n    value: function _getPosition() {\n      var _this$props = this.props,\n          longitude = _this$props.longitude,\n          latitude = _this$props.latitude,\n          offsetLeft = _this$props.offsetLeft,\n          offsetTop = _this$props.offsetTop;\n      var _this$state = this.state,\n          dragPos = _this$state.dragPos,\n          dragOffset = _this$state.dragOffset;\n\n      if (dragPos && dragOffset) {\n        return this._getDraggedPosition(dragPos, dragOffset);\n      }\n\n      var _this$_context$viewpo = this._context.viewport.project([longitude, latitude]),\n          _this$_context$viewpo2 = _slicedToArray(_this$_context$viewpo, 2),\n          x = _this$_context$viewpo2[0],\n          y = _this$_context$viewpo2[1];\n\n      x += offsetLeft;\n      y += offsetTop;\n      return [x, y];\n    }\n  }, {\n    key: \"_render\",\n    value: function _render() {\n      var _this$_getPosition = this._getPosition(),\n          _this$_getPosition2 = _slicedToArray(_this$_getPosition, 2),\n          x = _this$_getPosition2[0],\n          y = _this$_getPosition2[1];\n\n      var transform = \"translate(\".concat(crispPixel(x), \"px, \").concat(crispPixel(y), \"px)\");\n      var div = this._containerRef.current;\n\n      if (this._control && div) {\n        div.style.transform = transform;\n      } else {\n        var _this$props2 = this.props,\n            className = _this$props2.className,\n            draggable = _this$props2.draggable;\n        var dragPos = this.state.dragPos;\n        var containerStyle = {\n          position: 'absolute',\n          left: 0,\n          top: 0,\n          transform: transform,\n          cursor: draggable ? dragPos ? 'grabbing' : 'grab' : 'auto'\n        };\n        this._control = React.createElement(\"div\", {\n          className: \"mapboxgl-marker \".concat(className),\n          ref: this._containerRef,\n          style: containerStyle\n        }, this.props.children);\n      }\n\n      return this._control;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this._control = null;\n      return _get(_getPrototypeOf(Marker.prototype), \"render\", this).call(this);\n    }\n  }]);\n\n  return Marker;\n}(DraggableControl);\n\n_defineProperty(Marker, \"propTypes\", propTypes);\n\n_defineProperty(Marker, \"defaultProps\", defaultProps);\n\nexport { Marker as default };","map":null,"metadata":{},"sourceType":"module"}