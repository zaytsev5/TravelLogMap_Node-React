{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/mapbox/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport ReactMapGL, { Marker, Popup } from 'react-map-gl';\nimport ImageView from './components/ImageView';\n\nconst Mapbox = () => {\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [isShown, setShow] = useState(0); // const [addEntryLocation, setAddEntryLocation] = useState(null);\n\n  const [curPos, setCur] = useState({});\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 10.7781128,\n    longitude: 106.65325,\n    zoom: 12\n  });\n\n  const getEntries = async () => {\n    const response = await fetch('http://localhost:1337/api/logs');\n    const logEntries = await response.json();\n    console.log(logEntries); // const logEntries = [\n    //   {\n    //     id:1,\n    //     latitude:10.7781128,\n    //     longitude:106.6532558,\n    //     title: 'Bach Khoa University',\n    //     comments: 'This is the best university of Vietnam',\n    //     visitDate: '2020-06-19',\n    //     author:'nguyenvanhai',\n    //     image: 'https://wikitintuc.com/wp-content/uploads/2018/10/bachkhoa500-1540897389-2535-1540897584_500x300.jpg'\n    //   },\n    //   {\n    //     id:2,\n    //     latitude:10.8478,\n    //     longitude:106.7839,\n    //     title: 'Post and Telecommunications Institute of Technology',\n    //     comments: 'This is the best university of Vietnam',\n    //     visitDate: '2020-06-19',\n    //     author:'trandinhtam',\n    //     image:'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTf4jwGXCj45_mlRIyhJxtmGrBko2mMd8IDhQ&usqp=CAU'\n    //   }\n    // ]\n\n    setLogEntries(logEntries);\n  };\n\n  const getUserPosition = async () => {\n    var getPosition = function (options) {\n      return new Promise(function (resolve, reject) {\n        navigator.geolocation.getCurrentPosition(resolve, reject, options);\n      });\n    };\n\n    const position = await getPosition();\n    const logEntries = [{\n      id: 1,\n      latitude: position.coords.latitude,\n      longitude: position.coords.longitude,\n      title: 'Bach Khoa University',\n      comments: 'This is the best university of Vietnam',\n      image: ' http://localhost:5000/img2.png'\n    }];\n    setLogEntries(logEntries);\n    console.log(logEntries);\n  };\n\n  useEffect(() => {\n    getEntries();\n    console.log(isShown);\n  }, []);\n\n  const PlusIcon = () => {\n    const divStyle = {\n      position: 'absolute',\n      marginLeft: '500px',\n      zIndex: '99'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: divStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      version: \"1.1\",\n      id: \"Capa_1\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xlink: \"http://www.w3.org/1999/xlink\",\n      x: \"0px\",\n      y: \"0px\",\n      viewBox: \"0 0 496 496\",\n      style: \"enable-background:new 0 0 496 496;\",\n      space: \"preserve\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M248,0C111.033,0,0,111.033,0,248c0.154,136.903,111.097,247.846,248,248c136.967,0,248-111.033,248-248S384.967,0,248,0 z M248,480C119.87,480,16,376.13,16,248C16.146,119.93,119.93,16.146,248,16c128.13,0,232,103.87,232,232S376.13,480,248,480z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M400,240H256V96c0-4.418-3.582-8-8-8s-8,3.582-8,8v144H96c-4.418,0-8,3.582-8,8s3.582,8,8,8h144v144c0,4.418,3.582,8,8,8 s8-3.582,8-8V256h144c4.418,0,8-3.582,8-8S404.418,240,400,240z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }))))));\n  }; // const showAddMarkerPopup = (event) => {\n  //   const [ longitude, latitude ] = event.lngLat;\n  //   setAddEntryLocation({\n  //     latitude,\n  //     longitude,\n  //   });\n  // };\n\n\n  return /*#__PURE__*/React.createElement(ReactMapGL, Object.assign({}, viewport, {\n    mapStyle: \"mapbox://styles/thecjreynolds/ck117fnjy0ff61cnsclwimyay\",\n    mapboxApiAccessToken: 'pk.eyJ1IjoiemF5dHNldjUiLCJhIjoiY2tjaWk4cnc2MGtiMDJxazJwMGllOThlNyJ9.HciILC1tn3zdsXCuvzdRog',\n    onViewportChange: setViewport // onDblClick={showAddMarkerPopup}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(PlusIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }), logEntries.map(entry => /*#__PURE__*/React.createElement(React.Fragment, {\n    key: entry.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Marker, {\n    latitude: entry.latitude,\n    longitude: entry.longitude,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    // onClick = {() =>{\n    //   console.log(\"You have clicked...\");\n    // }}\n    onClick: () => setShowPopup(entry.id),\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"marker white\",\n    style: {\n      height: `${3 * viewport.zoom}px`,\n      width: `${3 * viewport.zoom}px`,\n      color: 'white'\n    },\n    version: \"1.1\",\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: '#FD003A'\n    },\n    d: \"M256,0C156.698,0,76,80.7,76,180c0,33.6,9.302,66.301,27.001,94.501l140.797,230.414 c2.402,3.9,6.002,6.301,10.203,6.901c5.698,0.899,12.001-1.5,15.3-7.2l141.2-232.516C427.299,244.501,436,212.401,436,180 C436,80.7,355.302,0,256,0z M256,270c-50.398,0-90-40.8-90-90c0-49.501,40.499-90,90-90s90,40.499,90,90 C346,228.9,306.999,270,256,270z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: '#E50027'\n    },\n    d: \"M256,0v90c49.501,0,90,40.499,90,90c0,48.9-39.001,90-90,90v241.991 c5.119,0.119,10.383-2.335,13.3-7.375L410.5,272.1c16.799-27.599,25.5-59.699,25.5-92.1C436,80.7,355.302,0,256,0z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  })))))), showPopup == entry.id ? /*#__PURE__*/React.createElement(Popup, {\n    latitude: entry.latitude,\n    longitude: entry.longitude,\n    closeButton: true,\n    closeOnClick: false,\n    dynamicPosition: true,\n    onClose: () => setShowPopup({}),\n    anchor: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup\",\n    style: {\n      width: '210px',\n      fontSize: '12px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }, entry.title), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, entry.comments), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, \"Author - \", entry.author), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, \"Visited on: \", new Date(entry.visitDate).toLocaleDateString()), entry.image && /*#__PURE__*/React.createElement(\"p\", {\n    onClick: () => setShow(entry.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: entry.image,\n    alt: entry.title,\n    width: \"200px\",\n    height: \"90px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 58\n    }\n  })))) : null, isShown == entry.id ? /*#__PURE__*/React.createElement(ImageView, {\n    src: entry.image,\n    value: isShown,\n    offShow: val => setShow(val),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }) : null)));\n};\n\nexport default Mapbox;","map":{"version":3,"sources":["/Users/apple/Desktop/mapbox/src/App.js"],"names":["React","useState","useEffect","ReactMapGL","Marker","Popup","ImageView","Mapbox","logEntries","setLogEntries","showPopup","setShowPopup","isShown","setShow","curPos","setCur","viewport","setViewport","width","height","latitude","longitude","zoom","getEntries","response","fetch","json","console","log","getUserPosition","getPosition","options","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","id","coords","title","comments","image","PlusIcon","divStyle","marginLeft","zIndex","map","entry","cursor","color","fill","fontSize","author","Date","visitDate","toLocaleDateString","val"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactMapGL, { Marker, Popup } from 'react-map-gl';\nimport ImageView from './components/ImageView';\n\n\n\nconst Mapbox = () => {\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [isShown , setShow] = useState(0)\n  \n  // const [addEntryLocation, setAddEntryLocation] = useState(null);\n  const [curPos, setCur] = useState({})\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 10.7781128,\n    longitude: 106.65325,\n    zoom: 12\n  });\n\n  \n  const getEntries = async () => {\n    const response = await fetch('http://localhost:1337/api/logs')\n    const logEntries = await response.json()\n    console.log(logEntries);\n    // const logEntries = [\n    //   {\n    //     id:1,\n    //     latitude:10.7781128,\n    //     longitude:106.6532558,\n    //     title: 'Bach Khoa University',\n    //     comments: 'This is the best university of Vietnam',\n    //     visitDate: '2020-06-19',\n    //     author:'nguyenvanhai',\n    //     image: 'https://wikitintuc.com/wp-content/uploads/2018/10/bachkhoa500-1540897389-2535-1540897584_500x300.jpg'\n    //   },\n    //   {\n    //     id:2,\n    //     latitude:10.8478,\n    //     longitude:106.7839,\n    //     title: 'Post and Telecommunications Institute of Technology',\n    //     comments: 'This is the best university of Vietnam',\n    //     visitDate: '2020-06-19',\n    //     author:'trandinhtam',\n    //     image:'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTf4jwGXCj45_mlRIyhJxtmGrBko2mMd8IDhQ&usqp=CAU'\n    //   }\n    // ]\n    setLogEntries(logEntries);\n  };\n\n  const getUserPosition = async() =>{\n    var getPosition = function (options) {\n      return new Promise(function (resolve, reject) {\n        navigator.geolocation.getCurrentPosition(resolve, reject, options);\n      });\n    }\n    const position = await getPosition();\n    const logEntries = [\n      {\n        id:1,\n        latitude:position.coords.latitude,\n        longitude:position.coords.longitude,\n        title: 'Bach Khoa University',\n        comments: 'This is the best university of Vietnam',\n        image: ' http://localhost:5000/img2.png'\n      }\n    ]\n    setLogEntries(logEntries);\n    console.log(logEntries);\n  }\n\n\n  useEffect( () => {\n   getEntries()\n   console.log(isShown);\n  }, []);\n  \n  const PlusIcon = () =>{\n    const divStyle  = {\n      position:'absolute',\n      marginLeft:'500px',\n      zIndex:'99'\n    }\n    return (\n      <div style={divStyle}> \n        <svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n          viewBox=\"0 0 496 496\" style=\"enable-background:new 0 0 496 496;\" space=\"preserve\">\n        <g>\n          <g>\n            <g>\n              <path d=\"M248,0C111.033,0,0,111.033,0,248c0.154,136.903,111.097,247.846,248,248c136.967,0,248-111.033,248-248S384.967,0,248,0\n                z M248,480C119.87,480,16,376.13,16,248C16.146,119.93,119.93,16.146,248,16c128.13,0,232,103.87,232,232S376.13,480,248,480z\"/>\n              <path d=\"M400,240H256V96c0-4.418-3.582-8-8-8s-8,3.582-8,8v144H96c-4.418,0-8,3.582-8,8s3.582,8,8,8h144v144c0,4.418,3.582,8,8,8\n                s8-3.582,8-8V256h144c4.418,0,8-3.582,8-8S404.418,240,400,240z\"/>\n            </g>\n          </g>\n        </g>\n        </svg>\n      </div>\n    )\n  }\n\n  // const showAddMarkerPopup = (event) => {\n  //   const [ longitude, latitude ] = event.lngLat;\n  //   setAddEntryLocation({\n  //     latitude,\n  //     longitude,\n  //   });\n  // };\n\n  return (\n    <ReactMapGL\n      {...viewport}\n      mapStyle=\"mapbox://styles/thecjreynolds/ck117fnjy0ff61cnsclwimyay\"\n      mapboxApiAccessToken={'pk.eyJ1IjoiemF5dHNldjUiLCJhIjoiY2tjaWk4cnc2MGtiMDJxazJwMGllOThlNyJ9.HciILC1tn3zdsXCuvzdRog'}\n      onViewportChange={setViewport}\n     // onDblClick={showAddMarkerPopup}\n    >\n      <PlusIcon />\n      {\n        logEntries.map(entry => (\n          <React.Fragment key={entry.id}>\n            <Marker\n              latitude={entry.latitude}\n              longitude={entry.longitude}\n            >\n              <div\n                // onClick = {() =>{\n                //   console.log(\"You have clicked...\");\n                // }}\n                onClick={() => setShowPopup(entry.id)}\n                style={{\n                  \n                  cursor:'pointer'\n                }}\n              >\n                <svg\n                  className=\"marker white\"\n                  style={{\n                    height: `${3 * viewport.zoom}px`,\n                    width: `${3 * viewport.zoom}px`,\n                    color:'white'\n                  }}\n                  version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                  <g>\n                    <g>\n                    <path style={{fill:'#FD003A'}} d=\"M256,0C156.698,0,76,80.7,76,180c0,33.6,9.302,66.301,27.001,94.501l140.797,230.414\n                      c2.402,3.9,6.002,6.301,10.203,6.901c5.698,0.899,12.001-1.5,15.3-7.2l141.2-232.516C427.299,244.501,436,212.401,436,180\n                      C436,80.7,355.302,0,256,0z M256,270c-50.398,0-90-40.8-90-90c0-49.501,40.499-90,90-90s90,40.499,90,90\n                      C346,228.9,306.999,270,256,270z\"/>\n                    <path style={{fill:'#E50027'}} d=\"M256,0v90c49.501,0,90,40.499,90,90c0,48.9-39.001,90-90,90v241.991\n                      c5.119,0.119,10.383-2.335,13.3-7.375L410.5,272.1c16.799-27.599,25.5-59.699,25.5-92.1C436,80.7,355.302,0,256,0z\"/>\n                    </g>\n                  </g>\n                </svg>\n              </div>\n            </Marker>\n            {\n              showPopup == entry.id ? (\n                <Popup\n                 \n                  latitude={entry.latitude}\n                  longitude={entry.longitude}\n                  closeButton={true}\n                  closeOnClick={false}\n                  dynamicPosition={true}\n                  onClose={() => setShowPopup({})}\n                  anchor=\"top\" >\n                  <div className=\"popup\" style={{width:'210px',fontSize:'12px'}}>\n                    <h3>{entry.title}</h3>\n                    <p>{entry.comments}</p>\n                    <p>Author - {entry.author}</p>\n                    <p>Visited on: {new Date(entry.visitDate).toLocaleDateString()}</p>\n                    {\n                      entry.image && \n                      <p onClick={()=>setShow(entry.id)}><img \n                        src={entry.image} \n                        alt={entry.title} \n                        width='200px' height='90px' />\n                      </p>\n                    }\n                  </div>\n                </Popup>\n              ) : null\n            }\n            {\n              isShown == entry.id ? (\n              <ImageView src={entry.image} value={isShown} offShow={(val) => setShow(val)} />\n              ) : null\n            }\n          </React.Fragment>\n        ))\n      }\n      {/* {\n        addEntryLocation ? (\n          <>\n          <Marker\n            latitude={addEntryLocation.latitude}\n            longitude={addEntryLocation.longitude}\n          >\n            <div>\n              <svg\n                className=\"marker red\"\n                style={{\n                  height: `${6 * viewport.zoom}px`,\n                  width: `${6 * viewport.zoom}px`,\n                }}\n                version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                <g>\n                  <g>\n                    <path d=\"M256,0C153.755,0,70.573,83.182,70.573,185.426c0,126.888,165.939,313.167,173.004,321.035\n                      c6.636,7.391,18.222,7.378,24.846,0c7.065-7.868,173.004-194.147,173.004-321.035C441.425,83.182,358.244,0,256,0z M256,278.719\n                      c-51.442,0-93.292-41.851-93.292-93.293S204.559,92.134,256,92.134s93.291,41.851,93.291,93.293S307.441,278.719,256,278.719z\"/>\n                  </g>\n                </g>\n              </svg>\n            </div>\n          </Marker>\n          <Popup\n            latitude={addEntryLocation.latitude}\n            longitude={addEntryLocation.longitude}\n            closeButton={true}\n            closeOnClick={false}\n            dynamicPosition={true}\n            onClose={() => setAddEntryLocation(null)}\n            anchor=\"top\" >\n            <div className=\"popup\">\n              <LogEntryForm onClose={() => {\n                setAddEntryLocation(null);\n                getEntries();\n              }} location={addEntryLocation} />\n            </div>\n          </Popup>\n          </>\n        ) : null\n      } */}\n    </ReactMapGL>\n  );\n}\n\nexport default Mapbox;"]},"metadata":{},"sourceType":"module"}