{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Dropbox/My Mac (zaytsev.local)/Documents/mapbox/src/Mapbox.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport ReactMapGL, { Marker, Popup } from 'react-map-gl';\nimport { BrowserRouter as Router, Switch, Route, Link, useParams } from \"react-router-dom\";\nimport ImageView from './components/ImageView';\nimport AddBox from './components/AddBox';\nimport User from './components/User';\nimport Processing from './components/Processing';\nimport Direction from './components/Direction';\nimport Clock from './components/Clock';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { userLogin, userLogout } from './actions/userActions';\n\nconst Mapbox = props => {\n  let {\n    id\n  } = useParams();\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [isShown, setShow] = useState(id ? parseInt(id) : 0);\n  const [isAdd, setAdd] = useState(false);\n  const [point, setPoint] = useState(false);\n  const [pos, setPos] = useState({});\n  const [user, setUser] = useState(false);\n  const [load, setLoad] = useState(false);\n  const [logged, setLogged] = useState({});\n  const [hint, setHint] = useState(false);\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 10.7781128,\n    longitude: 106.65325,\n    zoom: 12\n  });\n\n  const getLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(showPosition);\n    } else {\n      alert(\"Geolocation is not supported by this browser.\");\n    }\n  };\n\n  const showPosition = position => {\n    setViewport({\n      width: '100vw',\n      height: '100vh',\n      latitude: position.coords.latitude,\n      longitude: position.coords.longitude,\n      zoom: 12\n    });\n  };\n\n  const getUser = () => {\n    console.log(\"in getUser()\");\n    fetch(\"http://localhost:3000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    }).then(response => {\n      console.log(\"in then1\");\n      getEntries();\n      if (response.status === 200) return response.json();\n      throw new Error(\"failed to authenticate user\");\n    }).then(responseJson => {\n      setLogged(responseJson.user);\n      setUser(true);\n    }).catch(error => {\n      setLogged(false);\n    });\n  };\n\n  const getEntries = async () => {\n    const response = await fetch('http://localhost:3000/api/logs');\n    const result = await response.json(); // setLogEntries(result)\n\n    console.log(result);\n    setLogEntries(result);\n    setLoad(true); //setUser(result)\n  };\n\n  useEffect(() => {\n    if (window.location.hash === \"#_=_\") {\n      window.history.replaceState ? window.history.replaceState(null, null, window.location.href.split(\"#\")[0]) : window.location.hash = \"\";\n    } // getUser()\n\n\n    props.userLogin();\n    getEntries();\n    setUser(true); // console.log(props.user_info);\n  }, []);\n\n  const onClick = e => {\n    const newVewport = { ...viewport,\n      latitude: e.lngLat[1],\n      longitude: e.lngLat[0]\n    };\n    setPos({\n      lng: e.lngLat[0],\n      lat: e.lngLat[1]\n    });\n    console.log(isAdd);\n    if (isAdd) setPoint(true);\n    setViewport(newVewport);\n  };\n\n  const onDblClick = e => {\n    console.log('A click event has occurred at ' + e.lngLat[0]);\n  };\n\n  const PlusIcon = ({\n    handleClick,\n    value\n  }) => {\n    const divStyle = {\n      position: 'absolute',\n      margin: '15px 15px',\n      zIndex: '500'\n    };\n    const divStyle1 = {\n      position: 'absolute',\n      margin: '10px 15px',\n      zIndex: '500',\n      animation: 'App-logo-spin 0s',\n      animationFillMode: 'forwards'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: value ? divStyle1 : divStyle,\n      onClick: () => handleClick(!value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      className: \"marker white\",\n      style: {\n        height: `${3 * 12}px`,\n        width: `${3 * 12}px`\n      },\n      version: \"1.1\",\n      id: \"Layer_1\",\n      x: \"0px\",\n      y: \"0px\",\n      viewBox: \"0 0 512 512\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      style: {\n        fill: 'white'\n      },\n      d: \"m272 184c-4.417969 0-8-3.582031-8-8v-176h-80v176c0 4.417969-3.582031 8-8 8h-176v80h176c4.417969 0 8 3.582031 8 8v176h80v-176c0-4.417969 3.582031-8 8-8h176v-80zm0 0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 23\n      }\n    })))));\n  };\n\n  const Point = ({\n    pos\n  }) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        padding: '2px 7px',\n        height: '15px',\n        lineHeight: '15px',\n        borderRadius: '3px',\n        backgroundColor: 'white',\n        color: 'black',\n        top: '2%',\n        left: '5%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 7\n      }\n    }, pos.lng.toFixed(6), \" - \", pos.lat.toFixed(6));\n  };\n\n  return /*#__PURE__*/React.createElement(ReactMapGL, Object.assign({\n    mapStyle: \"mapbox://styles/thecjreynolds/ck117fnjy0ff61cnsclwimyay\",\n    mapboxApiAccessToken: 'pk.eyJ1IjoiemF5dHNldjUiLCJhIjoiY2tjaWk4cnc2MGtiMDJxazJwMGllOThlNyJ9.HciILC1tn3zdsXCuvzdRog',\n    onViewportChange: setViewport,\n    doubleClickZoom: false,\n    onDblClick: onClick,\n    scrollZoom: isShown ? false : true,\n    onClick: e => onDblClick(e)\n  }, viewport, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PlusIcon, {\n    handleClick: val => setAdd(val),\n    value: isAdd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }\n  }), isAdd && /*#__PURE__*/React.createElement(AddBox, {\n    reload: () => getEntries(),\n    logged: Object.keys(user_info).length > 0 ? true : false,\n    name: props.user_info.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 20\n    }\n  })), /*#__PURE__*/React.createElement(React.Fragment, null, point && /*#__PURE__*/React.createElement(Point, {\n    pos: pos,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 20\n    }\n  })), /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }\n  }), !load && /*#__PURE__*/React.createElement(Processing, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 18\n    }\n  }), logEntries.map(entry => /*#__PURE__*/React.createElement(React.Fragment, {\n    key: entry.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Marker, {\n    latitude: entry.latitude,\n    longitude: entry.longitude,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setShowPopup(entry.id),\n    style: {\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"marker white\",\n    style: {\n      height: `${3 * viewport.zoom}px`,\n      width: `${3 * viewport.zoom}px`,\n      cursor: 'pointer'\n    },\n    version: \"1.1\",\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: 'white'\n    },\n    d: \"M184.08,0c-74.992,0-136,61.008-136,136c0,24.688,11.072,51.24,11.536,52.36c3.576,8.488,10.632,21.672,15.72,29.4 l93.248,141.288c3.816,5.792,9.464,9.112,15.496,9.112s11.68-3.32,15.496-9.104l93.256-141.296 c5.096-7.728,12.144-20.912,15.72-29.4c0.464-1.112,11.528-27.664,11.528-52.36C320.08,61.008,259.072,0,184.08,0z M293.8,182.152c-3.192,7.608-9.76,19.872-14.328,26.8l-93.256,141.296c-1.84,2.792-2.424,2.792-4.264,0L88.696,208.952 c-4.568-6.928-11.136-19.2-14.328-26.808C74.232,181.816,64.08,157.376,64.08,136c0-66.168,53.832-120,120-120 c66.168,0,120,53.832,120,120C304.08,157.408,293.904,181.912,293.8,182.152z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: 'white'\n    },\n    d: \"M184.08,64.008c-39.704,0-72,32.304-72,72c0,39.696,32.296,72,72,72c39.704,0,72-32.304,72-72 C256.08,96.312,223.784,64.008,184.08,64.008z M184.08,192.008c-30.872,0-56-25.12-56-56s25.128-56,56-56s56,25.12,56,56 S214.952,192.008,184.08,192.008z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 21\n    }\n  })))))), showPopup == entry.id ? /*#__PURE__*/React.createElement(Popup, {\n    className: \"mu-popup\",\n    latitude: entry.latitude,\n    longitude: entry.longitude,\n    closeButton: true,\n    closeOnClick: false,\n    dynamicPosition: true,\n    onClose: () => setShowPopup({}),\n    anchor: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"asdsa-apopup\",\n    style: {\n      width: '210px',\n      fontSize: '12px',\n      zIndex: '99',\n      position: 'relative',\n      zIndex: '300'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 21\n    }\n  }, entry.title), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    style: {\n      fontSize: '15px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 24\n    }\n  }, entry.comments)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 24\n    }\n  }, \"Author\"), \" - \", entry.author), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 24\n    }\n  }, \"Visited on:\"), \" \", new Date(entry.visitDate).toLocaleDateString()), entry.image && /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/log/${entry.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    onClick: () => setShow(entry.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: entry.image,\n    alt: entry.title,\n    width: \"210px\",\n    height: \"100px\",\n    title: \"Zoom in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 64\n    }\n  })))), entry.image && /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `${entry.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 25\n    }\n  })))) : null, isShown == entry.id ? /*#__PURE__*/React.createElement(ImageView, {\n    src: entry.image,\n    id: entry.id,\n    uid: props.user_info.id || '',\n    name: props.user_info.displayName || '',\n    log: entry,\n    offShow: val => setShow(val),\n    url: Object.keys(props.user_info).length > 0 ? props.user_info.photos[0].value : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 15\n    }\n  }) : null, Object.keys(props.user_info).length > 0 ? /*#__PURE__*/React.createElement(User, {\n    url: props.user_info.photos[0].value,\n    userName: props.user_info.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 57\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:3000/auth/facebook\",\n    style: {\n      position: 'absolute',\n      padding: '5px 10px',\n      lineHeight: '25px',\n      borderRadius: '3px',\n      backgroundColor: 'white',\n      color: 'black',\n      bottom: '5%',\n      left: '5%',\n      textDecoration: 'none',\n      color: '#4267b2'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 17\n    }\n  }, \"Login with facebook\")), /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setHint(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    href: \"http://localhost:3000/auth/facebook\",\n    style: {\n      position: 'absolute',\n      padding: '1px 10px',\n      lineHeight: '25px',\n      borderRadius: '50%',\n      backgroundColor: 'white',\n      color: 'black',\n      bottom: '3%',\n      left: '1%',\n      textDecoration: 'none',\n      color: '#4267b2'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 17\n    }\n  }, \"?\")), hint && /*#__PURE__*/React.createElement(Direction, {\n    off: val => setHint(val),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 24\n    }\n  }), /*#__PURE__*/React.createElement(Clock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 15\n    }\n  }))));\n};\n\nMapbox.propTypes = {\n  userLogin: PropTypes.func.isRequired,\n  userLogout: PropTypes.func.isRequired,\n  user_info: PropTypes.object // newPost: PropTypes.object\n\n};\n\nconst mapStateToProps = state => ({\n  user_info: state.data.user,\n  // newPost: state.data.item,\n  message: state.data.message\n}); //Connect Posts to Store, pass fectPosts and delPost to Posts component\n\n\nexport default connect(mapStateToProps, {\n  userLogin,\n  userLogout\n})(Mapbox);","map":{"version":3,"sources":["/Users/apple/Dropbox/My Mac (zaytsev.local)/Documents/mapbox/src/Mapbox.js"],"names":["React","useState","useEffect","useRef","ReactMapGL","Marker","Popup","BrowserRouter","Router","Switch","Route","Link","useParams","ImageView","AddBox","User","Processing","Direction","Clock","PropTypes","connect","userLogin","userLogout","Mapbox","props","id","logEntries","setLogEntries","showPopup","setShowPopup","isShown","setShow","parseInt","isAdd","setAdd","point","setPoint","pos","setPos","user","setUser","load","setLoad","logged","setLogged","hint","setHint","viewport","setViewport","width","height","latitude","longitude","zoom","getLocation","navigator","geolocation","getCurrentPosition","showPosition","alert","position","coords","getUser","console","log","fetch","method","credentials","headers","Accept","then","response","getEntries","status","json","Error","responseJson","catch","error","result","window","location","hash","history","replaceState","href","split","onClick","e","newVewport","lngLat","lng","lat","onDblClick","PlusIcon","handleClick","value","divStyle","margin","zIndex","divStyle1","animation","animationFillMode","fill","Point","padding","lineHeight","borderRadius","backgroundColor","color","top","left","toFixed","val","Object","keys","user_info","length","displayName","map","entry","cursor","fontSize","title","comments","author","Date","visitDate","toLocaleDateString","image","photos","bottom","textDecoration","propTypes","func","isRequired","object","mapStateToProps","state","data","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport ReactMapGL, { Marker, Popup} from 'react-map-gl';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  useParams\n} from \"react-router-dom\";\nimport ImageView from './components/ImageView';\nimport AddBox from './components/AddBox'\nimport User from './components/User'\nimport Processing from './components/Processing'\nimport Direction from './components/Direction'\nimport Clock from './components/Clock'\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport {userLogin, userLogout} from './actions/userActions';\n\n\n\n\n\n\nconst Mapbox = (props) => {\n  \n  let { id } = useParams()\n  const [logEntries, setLogEntries] = useState([]);\n  const [showPopup, setShowPopup] = useState({});\n  const [isShown , setShow] = useState(id ? parseInt(id) : 0)\n  const [isAdd, setAdd] = useState(false)\n  const [point, setPoint] = useState(false)\n  const [pos, setPos] = useState({})\n  const [user, setUser] = useState(false)\n  const [load, setLoad] = useState(false)\n  const [logged, setLogged] = useState({})\n  const [hint, setHint] = useState(false)\n\n\n  const [viewport, setViewport] = useState({\n    width: '100vw',\n    height: '100vh',\n    latitude: 10.7781128,\n    longitude: 106.65325,\n    zoom: 12\n  });\n\n  const getLocation = ()=>{\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(showPosition);\n    } else { \n      alert(\"Geolocation is not supported by this browser.\")\n    }\n  }\n  \n  const showPosition = (position) => {\n    setViewport({\n      width: '100vw',\n      height: '100vh',\n      latitude: position.coords.latitude,\n      longitude: position.coords.longitude,\n      zoom:12\n    })\n  }\n\n  const getUser = () => {\n    console.log(\"in getUser()\");\n    fetch(\"http://localhost:3000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    })\n      .then(response => {\n      console.log(\"in then1\");\n\n        getEntries()\n        if (response.status === 200) return response.json();\n        throw new Error(\"failed to authenticate user\");\n      })\n      .then(responseJson => {\n        setLogged(responseJson.user)\n        setUser(true)\n      \n      })\n      .catch(error => {\n        setLogged(false)\n\n      });\n      \n  }\n  \n  const getEntries = async () => {\n    const response = await fetch('http://localhost:3000/api/logs')\n    const result = await response.json()\n    // setLogEntries(result)\n    console.log(result);\n    setLogEntries(result);\n    setLoad(true)\n    //setUser(result)\n    \n  };\n  \n\n  \n \n\n\n  useEffect( () => {\n    if (window.location.hash === \"#_=_\"){\n      window.history.replaceState \n          ? window.history.replaceState(null, null, window.location.href.split(\"#\")[0])\n          : window.location.hash = \"\";\n    }\n   \n    // getUser()\n    props.userLogin()\n    getEntries()\n    setUser(true)\n    // console.log(props.user_info);\n  }, []);\n\n  const onClick = (e) => {\n    const newVewport = {\n      ...viewport,\n      latitude: e.lngLat[1],\n      longitude: e.lngLat[0]\n    };\n    setPos({ lng: e.lngLat[0], lat: e.lngLat[1] })\n    console.log(isAdd);\n    if (isAdd) setPoint(true)\n  \n    setViewport(newVewport);\n  };\n  \n  const onDblClick = e => {\n\n    console.log('A click event has occurred at ' + e.lngLat[0]);\n\n  };\n\n  const PlusIcon = ({handleClick,value}) =>{\n   \n    const divStyle  = {\n      position:'absolute',\n      margin:'15px 15px',\n      zIndex:'500',\n     \n    }\n    const divStyle1  = {\n      position:'absolute',\n      margin:'10px 15px',\n      zIndex:'500',\n      animation:'App-logo-spin 0s',\n      animationFillMode: 'forwards',\n      \n\n    }\n    return (\n      <div style={value ? divStyle1 : divStyle} onClick={()=>handleClick(!value)}> \n        <svg\n                  className=\"marker white\"\n                  style={{\n                    height: `${3 * 12}px`,\n                    width: `${3 * 12}px`,\n                  }}\n                  version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                  <g>\n                    <g>\n                      <path style={{fill:'white'}} d=\"m272 184c-4.417969 0-8-3.582031-8-8v-176h-80v176c0 4.417969-3.582031 8-8 8h-176v80h176c4.417969 0 8 3.582031 8 8v176h80v-176c0-4.417969 3.582031-8 8-8h176v-80zm0 0\"/>\n                    </g>\n                  </g>\n                </svg>\n      </div>\n    )\n  }\n  const Point = ({pos}) =>{\n  \n    return (\n      <div \n        style={{\n          position: 'absolute',\n          padding: '2px 7px',\n          height: '15px',\n          lineHeight: '15px',\n          borderRadius: '3px',\n          backgroundColor: 'white',\n          color: 'black',\n          top: '2%',\n          left: '5%',\n\n        }}>\n      \n       {pos.lng.toFixed(6)} - {pos.lat.toFixed(6)}\n      </div>\n    )\n  }\n \n  return (  \n    <ReactMapGL\n  \n      mapStyle=\"mapbox://styles/thecjreynolds/ck117fnjy0ff61cnsclwimyay\"\n  \n      mapboxApiAccessToken={'pk.eyJ1IjoiemF5dHNldjUiLCJhIjoiY2tjaWk4cnc2MGtiMDJxazJwMGllOThlNyJ9.HciILC1tn3zdsXCuvzdRog'}\n      onViewportChange={setViewport}\n      doubleClickZoom={false}\n      onDblClick={onClick}\n      scrollZoom={isShown ? false : true}\n      onClick={(e) => onDblClick(e)}\n      {...viewport}\n      \n  \n    >\n      \n      <>\n        <PlusIcon handleClick={(val) => setAdd(val)} value={isAdd} />\n        {\n          isAdd && <AddBox reload={()=>getEntries()} logged={Object.keys(user_info).length > 0 ? true : false} name={props.user_info.displayName}/>\n        }\n\n      </>\n      <>\n        {\n          point && <Point pos={pos} />\n        }\n      </>\n      <Router>\n      </Router>\n      {\n        !load && <Processing />\n      }\n      {\n        logEntries.map(entry => (\n          <React.Fragment key={entry.id}>\n            <Marker\n              latitude={entry.latitude}\n              longitude={entry.longitude}\n            >\n              <div\n       \n                onClick={() => setShowPopup(entry.id)}\n                style={{\n                  \n                  cursor:'pointer'\n                }}\n              >\n                <svg\n                  className=\"marker white\"\n                  style={{\n                    height: `${3 * viewport.zoom}px`,\n                    width: `${3 * viewport.zoom}px`,\n                    cursor: 'pointer'\n                  }}\n                  version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                  <g>\n                    <g>\n                    <path style={{fill:'white'}} d=\"M184.08,0c-74.992,0-136,61.008-136,136c0,24.688,11.072,51.24,11.536,52.36c3.576,8.488,10.632,21.672,15.72,29.4\n                        l93.248,141.288c3.816,5.792,9.464,9.112,15.496,9.112s11.68-3.32,15.496-9.104l93.256-141.296\n                        c5.096-7.728,12.144-20.912,15.72-29.4c0.464-1.112,11.528-27.664,11.528-52.36C320.08,61.008,259.072,0,184.08,0z\n                        M293.8,182.152c-3.192,7.608-9.76,19.872-14.328,26.8l-93.256,141.296c-1.84,2.792-2.424,2.792-4.264,0L88.696,208.952\n                        c-4.568-6.928-11.136-19.2-14.328-26.808C74.232,181.816,64.08,157.376,64.08,136c0-66.168,53.832-120,120-120\n                        c66.168,0,120,53.832,120,120C304.08,157.408,293.904,181.912,293.8,182.152z\"/>\n                    <path style={{fill:'white'}} d=\"M184.08,64.008c-39.704,0-72,32.304-72,72c0,39.696,32.296,72,72,72c39.704,0,72-32.304,72-72\n                        C256.08,96.312,223.784,64.008,184.08,64.008z M184.08,192.008c-30.872,0-56-25.12-56-56s25.128-56,56-56s56,25.12,56,56\n                        S214.952,192.008,184.08,192.008z\"/>\n                    </g>\n                  </g>\n                </svg>\n              </div>\n            </Marker>\n            {\n              showPopup == entry.id ? (\n                <Popup\n                  className=\"mu-popup\"\n                  latitude={entry.latitude}\n                  longitude={entry.longitude}\n                  closeButton={true}\n                  closeOnClick={false}\n                  dynamicPosition={true}\n                  onClose={() => setShowPopup({})}\n                  anchor=\"top\" >\n                  <div className=\"asdsa-apopup\" style={{ width: '210px', fontSize: '12px', zIndex: '99', position: 'relative', zIndex: '300' }}>\n                    <h2>{entry.title}</h2>\n                    <p><strong style={{fontSize:'15px'}}>{entry.comments}</strong></p>\n                    <p><strong>Author</strong> - {entry.author}</p>\n                    <p><strong>Visited on:</strong> {new Date(entry.visitDate).toLocaleDateString()}</p>\n                    {\n                      entry.image &&\n                      <Router>\n                        <Link to={`/log/${entry.id}`}>\n\n                          <p onClick={() => setShow(entry.id)}><img\n                            src={entry.image}\n                            alt={entry.title}\n                            width='210px' height='100px'\n                            title=\"Zoom in\"\n                          />\n                          </p>\n                        </Link>\n                      </Router>\n                    }\n                    {entry.image && \n                      <Router>\n                        <Link to={`${entry.id}`}>\n                        </Link>\n                      </Router>\n                      \n                    }\n                  </div>\n                </Popup>\n              ) : null\n            }\n            {\n              isShown == entry.id ? (\n              <ImageView \n                src={entry.image} \n                id={entry.id} \n                uid={props.user_info.id || ''} \n                name={props.user_info.displayName || ''}\n                log={entry} \n                offShow={(val) => setShow(val)}\n                url={Object.keys(props.user_info).length > 0 ? props.user_info.photos[0].value : ''} />\n              ) :  null\n            }\n            { Object.keys(props.user_info).length > 0 ? <User url={props.user_info.photos[0].value} userName={props.user_info.displayName}/> : \n              <div className=\"login\">\n                < a \n                  href='http://localhost:3000/auth/facebook'\n                  style={{\n                    position: 'absolute',\n                    padding: '5px 10px',\n                    lineHeight: '25px',\n                    borderRadius: '3px',\n                    backgroundColor: 'white',\n                    color: 'black',\n                    bottom: '5%',\n                    left: '5%',\n                    textDecoration:'none',\n                    color:'#4267b2'\n\n                  }}\n\n                >Login with facebook</a>\n              </div>\n            }\n            <div onClick={()=>setHint(true)} >\n                <p \n                  href='http://localhost:3000/auth/facebook'\n                  style={{\n                    position: 'absolute',\n                    padding: '1px 10px',\n            \n                    lineHeight: '25px',\n                    borderRadius: '50%',\n                    backgroundColor: 'white',\n                    color: 'black',\n                    bottom: '3%',\n                    left: '1%',\n                    textDecoration:'none',\n                    color:'#4267b2'\n                  }}\n                >\n                  ?\n                </p>\n              </div>\n              {hint && <Direction off={(val)=>setHint(val)}/>}\n              <Clock />\n          </React.Fragment>\n        ))\n      }\n     \n    </ReactMapGL>\n    \n  );\n}\n\nMapbox.propTypes = {\n  userLogin: PropTypes.func.isRequired,\n  userLogout: PropTypes.func.isRequired,\n  user_info: PropTypes.object,\n  // newPost: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  user_info: state.data.user,\n  // newPost: state.data.item,\n  message: state.data.message\n});\n//Connect Posts to Store, pass fectPosts and delPost to Posts component\nexport default connect(mapStateToProps, {userLogin, userLogout})(Mapbox);"]},"metadata":{},"sourceType":"module"}